<?xml version="1.0"?>
<ZopeData>
  <record id="1" aka="AAAAAAAAAAE=">
    <pickle>
      <tuple>
        <global name="ZopePageTemplate" module="Products.PageTemplates.ZopePageTemplate"/>
        <tuple/>
      </tuple>
    </pickle>
    <pickle>
      <dictionary>
        <item>
            <key> <string>_bind_names</string> </key>
            <value>
              <object>
                <klass>
                  <global name="NameAssignments" module="Shared.DC.Scripts.Bindings"/>
                </klass>
                <tuple/>
                <state>
                  <dictionary>
                    <item>
                        <key> <string>_asgns</string> </key>
                        <value>
                          <dictionary>
                            <item>
                                <key> <string>name_subpath</string> </key>
                                <value> <string>traverse_subpath</string> </value>
                            </item>
                          </dictionary>
                        </value>
                    </item>
                  </dictionary>
                </state>
              </object>
            </value>
        </item>
        <item>
            <key> <string>_text</string> </key>
            <value> <string encoding="cdata"><![CDATA[

<tal:block metal:define-macro="disable_server_integration">\n
\n
  <tal:block tal:condition="isKnowledgePadTemplateUsed">\n
    <script type="text/javascript" \n
            tal:content="structure python: here.Base_generateOverrideJavaScript(\n
                            mode = mode,\n
                            default_pad_group = default_pad_group,\n
                            cancel_url = cancel_url)">\n
    </script>\n
  </tal:block>\n
\n
</tal:block>\n
\n
<tal:block metal:define-macro="knowledge_pad_security_check">\n
\n
  <div tal:condition="python: not isUserAllowedToCreateKnowledgePads and not isAnon">\n
    <div class="wait_block">\n
      <p i18n:translate="" i18n:domain="ui"> \n
        You are not allowed to use knowledge pad system due to security restrictions.\n
      </p>\n
    </div>\n
  </div>\n
\n
</tal:block> \n
\n
<tal:block metal:define-macro="add_new_gadget">\n
  <a href="GadgetTool_viewPrettyGadgetList"\n
     tal:condition="not: isKnowledgePadTemplateUsed"\n
     tal:define="real_here python: request.get(\'current_web_section\', here);\n
                 real_here python: test(real_here.getPortalType()!=\'Web Site\', real_here, here);"\n
     tal:attributes="href python:\n
     \'GadgetTool_viewPrettyGadgetDialog?reset=1&cancel_url=%s/view&active_pad_relative_url=%s&mode=%s\'\n
      %(real_here.absolute_url(), \n
        active_knowledge_pad.getRelativeUrl(), mode);"\n
     title="Click to add portlets"\n
     i18n:translate="" \n
     i18n:domain="ui"> Add gadgets</a>\n
</tal:block>\n
\n
<tal:block metal:define-macro="stick">\n
  <tal:block\n
    tal:condition="not: isKnowledgePadTemplateUsed"\n
    tal:define="is_customized_pad python:\n
          active_knowledge_pad.getPublicationSectionValue()==context and\n
          active_knowledge_pad.getGroup()==default_pad_group">\n
\n
    <a tal:condition="not: is_customized_pad"\n
       tal:attributes="href python:\n
       \'WebSection_stickKnowledgePad?knowledge_pad_url=%s&cancel_url=%s\'\n
       %(active_knowledge_pad.getRelativeUrl(), cancel_url)"\n
       i18n:translate="" \n
       i18n:domain="ui">Stick it\n
    </a>\n
\n
    <a tal:condition="is_customized_pad"\n
       tal:attributes="href python:\n
       \'WebSection_unStickKnowledgePad?knowledge_pad_url=%s&cancel_url=%s\'\n
       %(active_knowledge_pad.getRelativeUrl(), cancel_url)"\n
       i18n:translate="" \n
       i18n:domain="ui">Unstick it\n
    </a>\n
  </tal:block>\n
</tal:block>\n
\n
\n
\n
<tal:block metal:define-macro="hidden_dialogs">\n
\n
  <div id="add_new_tab_dialog"\n
      class="toggable_dialog">\n
    <h3 i18n:translate="" i18n:domain="ui"> Add new tab </h3>\n
      <span i18n:translate="" i18n:domain="ui">Tab name</span>: \n
      <input type="text" value="" name="pad_title" id="new_pad_title"/><br/><br/>\n
      <button type="button"\n
              onclick="toggleElement(\'add_new_tab_dialog\');"\n
              i18n:translate="" \n
              i18n:domain="ui">Cancel</button>\n
      <button type="button"\n
              tal:condition="python: mode==\'erp5_front\'"\n
              tal:attributes="onclick python: \n
              \'\'\'addPadOnServer(\'ERP5Site_addNewKnowledgePad\', \n
                                \'/%s\', \'%s\',\n
                                \'view\')\'\'\'\n
                %(context.getPortalObject().getId(),\n
                  mode)" \n
              i18n:translate="" \n
              i18n:domain="ui">Add</button>\n
      <button type="button"\n
              tal:condition="python: mode==\'web_front\'"\n
              tal:attributes="onclick python: \n
              \'\'\'addPadOnServer(\'ERP5Site_addNewKnowledgePad\', \n
                                 \'/%s/%s\', \'%s\', \n
                                 \'view\')\'\'\'\n
                 %(context.getPortalObject().getId(), \n
                   context.getRelativeUrl(),\n
                   mode)" \n
              i18n:translate="" \n
              i18n:domain="ui">Add</button>\n
  </div>\n
\n
  <div id="rename_tab_dialog" \n
      tal:condition="active_knowledge_pad"\n
      class="toggable_dialog">\n
    <h3 i18n:translate="" i18n:domain="ui"> Rename tab </h3>\n
    <form action="">\n
      <span i18n:translate="" i18n:domain="ui">Tab name</span>:\n
      <input type="text"\n
            id="new_knowledge_pad_title"\n
            name="knowledge_pad_title"\n
            tal:attributes="value active_knowledge_pad/getTitle"/><br/><br/>\n
      <button type="button"\n
              i18n:translate="" \n
              i18n:domain="ui"\n
              onclick="toggleElement(\'rename_tab_dialog\');">Cancel</button>\n
      <button type="button"\n
              i18n:translate="" \n
              i18n:domain="ui"\n
              tal:attributes="onclick python: \'renameKnowledgePadToServer(\n
              \\\'rename_tab_dialog\\\',\n
              \\\'active_knowledge_pad_title\\\',\n
              \\\'new_knowledge_pad_title\\\',\n
              \\\'%s\\\')\' %active_knowledge_pad.getRelativeUrl()">\n
        Rename \n
      </button>\n
    </form>\n
  </div>\n
</tal:block>\n
\n
\n
<tal:block metal:define-macro="navigation"\n
           tal:define="is_tabs_visible \n
                            python: int(here.REQUEST.get(\'is_tabs_visible\', 1));">\n
\n
   <table id="navigation_table">\n
      <tr>\n
        <td style="width: 17.5%;">\n
          <div class="tab"\n
              id="tabs_switcher"\n
              tal:attributes="class python: test(is_tabs_visible,\n
                                                 \'border_bottom1px\',\n
                                                  \'border_bottom0px\');">\n
            <span i18n:translate="" i18n:domain="ui"\n
                  tal:condition="not: is_tabs_visible">Show tabs</span>\n
            <span i18n:translate="" i18n:domain="ui" \n
                  tal:condition="is_tabs_visible">Hide tabs</span>\n
        </div>\n
      </td>\n
        <td>\n
          <div id="tabs"\n
              tal:attributes="style python: \n
                                    \'display: %s\' %test(is_tabs_visible, \'block\', \'none\')">\n
              <ul>\n
                <tal:block tal:repeat="knowledge_pad knowledge_pads">\n
\n
                  <tal:block  \n
                    tal:define="is_active python:\n
                    knowledge_pad.getRelativeUrl()==active_knowledge_pad.getRelativeUrl()"> \n
\n
                    <li tal:condition="is_active"\n
                        tal:define="global active_knowledge_pad knowledge_pad"\n
                        class="tab tab_selected">\n
                        <span id="active_knowledge_pad_title" \n
                              tal:content="knowledge_pad/title"/>\n
                        <img src="icon_edit.gif" \n
                            title="Settings"\n
                            i18n:attributes="title"\n
                            i18n:domain="ui"\n
                            class="clickable_image"\n
                            onclick="toggleElement(\'rename_tab_dialog\');" />\n
\n
                        <img src="icon_remove.gif" \n
                            title="Remove"\n
                            i18n:attributes="title"\n
                            i18n:domain="ui"\n
                            class="clickable_image"\n
                            tal:condition="python: mode==\'erp5_front\'"\n
                            tal:attributes="onclick python: \'removeKnowledgePadFromServer(\n
                            \\\'%s\\\', \\\'%s\\\',\\\'/%s\\\')\' \n
                             %(active_knowledge_pad.getRelativeUrl(), \n
                               mode,\n
                               context.getId())" />\n
                        <img src="icon_remove.gif" \n
                             title="Remove"\n
                             i18n:attributes="title"\n
                             i18n:domain="ui"\n
                             class="clickable_image"\n
                             tal:condition="python: mode!=\'erp5_front\'"\n
                             tal:attributes="onclick python: \'removeKnowledgePadFromServer(\n
                             \\\'%s\\\', \\\'%s\\\',\\\'/%s/%s\\\')\' \n
                             %(active_knowledge_pad.getRelativeUrl(), \n
                               mode,\n
                               context.getPortalObject().getId(),\n
                               context.getRelativeUrl())" />\n
                    </li>\n
\n
                    <li tal:condition="not: is_active"\n
                        class="tab">\n
                      <a tal:attributes="href python:\n
                                          \'ERP5Site_toggleActiveKnowledgePad?knowledge_pad_url=%s&mode=%s\'\n
                                          %(knowledge_pad.getRelativeUrl(), mode)">\n
                        <span tal:content="knowledge_pad/getTitle"/>\n
                      </a>\n
                    </li>\n
                  </tal:block>\n
                </tal:block>\n
                <li class="tab"\n
                    tal:condition="not: isKnowledgePadTemplateUsed"\n
                    onclick="toggleElement(\'add_new_tab_dialog\');"\n
                    i18n:translate="" i18n:domain="ui"\n
                    id="add_new_tab_dialog_link">Add tab</li>\n
                <li class="tab"\n
                    tal:condition="isKnowledgePadTemplateUsed"\n
                    onclick="showCreateDefaultKnowledgePadWarningMessage();"\n
                    i18n:translate="" i18n:domain="ui"\n
                    id="add_new_tab_dialog_link">\n
                    <img src="images/configure.png" \n
                         style="width:15px;"\n
                         alt="images/configure.png"/>\n
                </li>\n
              </ul>\n
            </div>\n
          </td>\n
    \n
          <td>\n
            <div id="add_new_gadget_link"\n
                 tal:attributes="class python: test(is_tabs_visible,\n
                                                    \'border_bottom1px\',\n
                                                    \'border_bottom0px\');">\n
              <span    metal:use-macro="container/Base_viewKnowledgePadMacroLibrary/macros/add_new_gadget"> Add Gadgets</span>\n
            </div>\n
          </td>\n
\n
        </tr>\n
      </table>\n
\n
</tal:block>

]]></string> </value>
        </item>
        <item>
            <key> <string>content_type</string> </key>
            <value> <string>text/html</string> </value>
        </item>
        <item>
            <key> <string>expand</string> </key>
            <value> <int>0</int> </value>
        </item>
        <item>
            <key> <string>id</string> </key>
            <value> <string>Base_viewKnowledgePadMacroLibrary</string> </value>
        </item>
        <item>
            <key> <string>title</string> </key>
            <value> <string></string> </value>
        </item>
      </dictionary>
    </pickle>
  </record>
</ZopeData>
