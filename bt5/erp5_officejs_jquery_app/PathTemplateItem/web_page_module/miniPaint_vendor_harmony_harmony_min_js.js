//http://ricardocabello.com/blog/post/689
var sketchy_brush={context:null,prevMouseX:null,prevMouseY:null,points:null,count:null,init:function(a){this.context=a,this.context.globalCompositeOperation="source-over",this.points=new Array,this.count=0},destroy:function(){},strokeStart:function(a,b){this.prevMouseX=a,this.prevMouseY=b},stroke:function(a,b,c,d){var e,f,g,h;for(this.points.push([b,c]),this.context.strokeStyle="rgba("+a.r+", "+a.g+", "+a.b+", 0.1)",this.context.beginPath(),this.context.moveTo(this.prevMouseX,this.prevMouseY),this.context.lineTo(b,c),this.context.stroke(),this.context.strokeStyle="rgba("+a.r+", "+a.g+", "+a.b+", 0.1 )",e=0;e<this.points.length;e++)f=this.points[e][0]-this.points[this.count][0],g=this.points[e][1]-this.points[this.count][1],h=f*f+g*g,h<800*d&&Math.random()>h/(400*d)&&(this.context.beginPath(),this.context.moveTo(this.points[this.count][0]+.3*f,this.points[this.count][1]+.3*g),this.context.lineTo(this.points[e][0]-.3*f,this.points[e][1]-.3*g),this.context.stroke());this.prevMouseX=b,this.prevMouseY=c,this.count++},strokeEnd:function(a,b){}},shaded_brush={context:null,prevMouseX:null,prevMouseY:null,points:null,count:null,init:function(a){this.context=a,this.context.globalCompositeOperation="source-over",this.points=new Array,this.count=0},destroy:function(){},strokeStart:function(a,b){this.prevMouseX=a,this.prevMouseY=b},stroke:function(a,b,c,d){var e,f,g,h;for(this.points.push([b,c]),e=0;e<this.points.length;e++)f=this.points[e][0]-this.points[this.count][0],g=this.points[e][1]-this.points[this.count][1],h=f*f+g*g,h<200*d&&(this.context.strokeStyle="rgba("+a.r+", "+a.g+", "+a.b+", "+.1*(1-h/(200*d))+" )",this.context.beginPath(),this.context.moveTo(this.points[this.count][0],this.points[this.count][1]),this.context.lineTo(this.points[e][0],this.points[e][1]),this.context.stroke());this.prevMouseX=b,this.prevMouseY=c,this.count++},strokeEnd:function(a,b){}},chrome_brush={context:null,prevMouseX:null,prevMouseY:null,points:null,count:null,init:function(a){this.context=a,this.points=new Array,this.count=0},destroy:function(){},strokeStart:function(a,b){this.prevMouseX=a,this.prevMouseY=b},stroke:function(a,b,c,d){var e,f,g,h;for(this.points.push([b,c]),this.context.strokeStyle="rgba("+a.r+", "+a.g+", "+a.b+", 0.1)",this.context.beginPath(),this.context.moveTo(this.prevMouseX,this.prevMouseY),this.context.lineTo(b,c),this.context.stroke(),e=0;e<this.points.length;e++)f=this.points[e][0]-this.points[this.count][0],g=this.points[e][1]-this.points[this.count][1],h=f*f+g*g,h<200*d&&(this.context.strokeStyle="rgba("+Math.floor(255*Math.random())+", "+Math.floor(255*Math.random())+", "+Math.floor(255*Math.random())+", 0.1 )",this.context.beginPath(),this.context.moveTo(this.points[this.count][0]+.2*f,this.points[this.count][1]+.2*g),this.context.lineTo(this.points[e][0]-.2*f,this.points[e][1]-.2*g),this.context.stroke());this.prevMouseX=b,this.prevMouseY=c,this.count++},strokeEnd:function(a,b){}};