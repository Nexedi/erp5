/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
Xinha.InlineStyler=function(c,a,b,d){this.element=c;this.editor=a;this.dialog=b;this.doc=d?d:document;this.inputs={styles:{},aux:{}};this.styles={};this.auxData={}};Xinha.InlineStyler.getLength=function(b){var a=parseInt(b);if(isNaN(a)){a=""}return a};Xinha.InlineStyler.prototype.applyStyle=function(f){var a=this.element;var d=a.style;for(var b in f){if(typeof f[b]=="function"){continue}if(f[b]!=null){var e=f[b].value||f[b]}switch(b){case"backgroundImage":if(/\S/.test(e)){d.backgroundImage="url("+e+")"}else{d.backgroundImage="none"}break;case"borderCollapse":d.borderCollapse=f[b]=="on"?"collapse":"separate";break;case"width":if(/\S/.test(e)){d.width=e+this.inputs.aux.widthUnit.value}else{d.width=""}break;case"height":if(/\S/.test(e)){d.height=e+this.inputs.aux.heightUnit.value}else{d.height=""}break;case"textAlign":if(e=="char"){var c=this.inputs.aux.textAlignChar.value;if(c=='"'){c='\\"'}d.textAlign='"'+c+'"'}else{if(e=="-"){d.textAlign=""}else{d.textAlign=e}}break;case"verticalAlign":a.vAlign="";if(e=="-"){d.verticalAlign=""}else{d.verticalAlign=e}break;case"float":if(Xinha.is_ie){d.styleFloat=e}else{d.cssFloat=e}break;case"borderWidth":d[b]=e?e+"px":"0px";break;default:d[b]=e;break}}};Xinha.InlineStyler.prototype.createStyleLayoutFieldset=function(){var l=this;var f=this.editor;var u=this.doc;var d=this.element;var s=u.createElement("fieldset");var j=u.createElement("legend");s.appendChild(j);j.innerHTML=Xinha._lc("Layout","TableOperations");var p=u.createElement("table");s.appendChild(p);p.style.width="100%";var b=u.createElement("tbody");p.appendChild(b);var m=d.tagName.toLowerCase();var c,g,k,r,a,h,n;if(m!="td"&&m!="tr"&&m!="th"){c=u.createElement("tr");b.appendChild(c);g=u.createElement("td");g.className="label";c.appendChild(g);g.innerHTML=Xinha._lc("Float","TableOperations")+":";g=u.createElement("td");c.appendChild(g);r=u.createElement("select");r.name=this.dialog.createId("float");g.appendChild(r);this.inputs.styles["float"]=r;h=["None","Left","Right"];for(var n=0;n<h.length;++n){var e=h[n];var t=h[n].toLowerCase();a=u.createElement("option");a.innerHTML=Xinha._lc(e,"TableOperations");a.value=t;if(Xinha.is_ie){a.selected=((""+d.style.styleFloat).toLowerCase()==t)}else{a.selected=((""+d.style.cssFloat).toLowerCase()==t)}r.appendChild(a)}}c=u.createElement("tr");b.appendChild(c);g=u.createElement("td");g.className="label";c.appendChild(g);g.innerHTML=Xinha._lc("Width","TableOperations")+":";g=u.createElement("td");c.appendChild(g);k=u.createElement("input");k.name=this.dialog.createId("width");k.type="text";k.value=Xinha.InlineStyler.getLength(d.style.width);k.size="5";this.inputs.styles.width=k;k.style.marginRight="0.5em";g.appendChild(k);r=u.createElement("select");r.name=this.dialog.createId("widthUnit");this.inputs.aux.widthUnit=r;a=u.createElement("option");a.innerHTML=Xinha._lc("percent","TableOperations");a.value="%";a.selected=/%/.test(d.style.width);r.appendChild(a);a=u.createElement("option");a.innerHTML=Xinha._lc("pixels","TableOperations");a.value="px";a.selected=/px/.test(d.style.width);r.appendChild(a);g.appendChild(r);r.style.marginRight="0.5em";g.appendChild(u.createTextNode(Xinha._lc("Text align","TableOperations")+":"));r=u.createElement("select");r.name=this.dialog.createId("textAlign");r.style.marginLeft=r.style.marginRight="0.5em";g.appendChild(r);this.inputs.styles.textAlign=r;h=["Left","Center","Right","Justify","-"];if(m=="td"){h.push("Char")}k=u.createElement("input");this.inputs.aux.textAlignChar=k;k.name=this.dialog.createId("textAlignChar");k.size="1";k.style.fontFamily="monospace";g.appendChild(k);for(var n=0;n<h.length;++n){var e=h[n];var t=e.toLowerCase();a=u.createElement("option");a.value=t;a.innerHTML=Xinha._lc(e,"TableOperations");a.selected=((d.style.textAlign.toLowerCase()==t)||(d.style.textAlign==""&&e=="-"));r.appendChild(a)}var o=k;function q(i){o.style.visibility=i?"visible":"hidden";if(i){o.focus();o.select()}}r.onchange=function(){q(this.value=="char")};q(r.value=="char");c=u.createElement("tr");b.appendChild(c);g=u.createElement("td");g.className="label";c.appendChild(g);g.innerHTML=Xinha._lc("Height","TableOperations")+":";g=u.createElement("td");c.appendChild(g);k=u.createElement("input");k.name=this.dialog.createId("height");k.type="text";k.value=Xinha.InlineStyler.getLength(d.style.height);k.size="5";this.inputs.styles.height=k;k.style.marginRight="0.5em";g.appendChild(k);r=u.createElement("select");r.name=this.dialog.createId("heightUnit");this.inputs.aux.heightUnit=r;a=u.createElement("option");a.innerHTML=Xinha._lc("percent","TableOperations");a.value="%";a.selected=/%/.test(d.style.height);r.appendChild(a);a=u.createElement("option");a.innerHTML=Xinha._lc("pixels","TableOperations");a.value="px";a.selected=/px/.test(d.style.height);r.appendChild(a);g.appendChild(r);r.style.marginRight="0.5em";g.appendChild(u.createTextNode(Xinha._lc("Vertical align","TableOperations")+":"));r=u.createElement("select");r.name=this.dialog.createId("verticalAlign");this.inputs.styles.verticalAlign=r;r.style.marginLeft="0.5em";g.appendChild(r);h=["Top","Middle","Bottom","Baseline","-"];for(var n=0;n<h.length;++n){var e=h[n];var t=e.toLowerCase();a=u.createElement("option");a.value=t;a.innerHTML=Xinha._lc(e,"TableOperations");a.selected=((d.style.verticalAlign.toLowerCase()==t)||(d.style.verticalAlign==""&&e=="-"));r.appendChild(a)}return s};Xinha.InlineStyler.prototype.createStyleFieldset=function(){var f=this.editor;var u=this.doc;var e=this.element;var s=u.createElement("fieldset");var k=u.createElement("legend");s.appendChild(k);k.innerHTML=Xinha._lc("CSS Style","TableOperations");var q=u.createElement("table");s.appendChild(q);q.style.width="100%";var b=u.createElement("tbody");q.appendChild(b);var d,g,l,r,a,h,p;d=u.createElement("tr");b.appendChild(d);g=u.createElement("td");d.appendChild(g);g.className="label";g.innerHTML=Xinha._lc("Background","TableOperations")+":";g=u.createElement("td");d.appendChild(g);l=u.createElement("input");l.name=this.dialog.createId("backgroundColor");l.value=Xinha._colorToRgb(e.style.backgroundColor);l.type="hidden";this.inputs.styles.backgroundColor=l;l.style.marginRight="0.5em";g.appendChild(l);new Xinha.colorPicker.InputBinding(l);g.appendChild(u.createTextNode(" "+Xinha._lc("Image URL","TableOperations")+": "));l=u.createElement("input");l.name=this.dialog.createId("backgroundImage");l.type="text";this.inputs.styles.backgroundImage=l;if(e.style.backgroundImage.match(/url\(\s*(.*?)\s*\)/)){l.value=RegExp.$1}g.appendChild(l);d=u.createElement("tr");b.appendChild(d);g=u.createElement("td");d.appendChild(g);g.className="label";g.innerHTML=Xinha._lc("FG Color","TableOperations")+":";g=u.createElement("td");d.appendChild(g);l=u.createElement("input");l.name=this.dialog.createId("color");l.value=Xinha._colorToRgb(e.style.color);l.type="hidden";this.inputs.styles.color=l;l.style.marginRight="0.5em";g.appendChild(l);new Xinha.colorPicker.InputBinding(l);l=u.createElement("input");l.style.visibility="hidden";l.type="text";g.appendChild(l);d=u.createElement("tr");b.appendChild(d);g=u.createElement("td");d.appendChild(g);g.className="label";g.innerHTML=Xinha._lc("Border","TableOperations")+":";g=u.createElement("td");d.appendChild(g);l=u.createElement("input");l.name=this.dialog.createId("borderColor");l.value=Xinha._colorToRgb(e.style.borderColor);l.type="hidden";this.inputs.styles.borderColor=l;l.style.marginRight="0.5em";g.appendChild(l);new Xinha.colorPicker.InputBinding(l);r=u.createElement("select");r.name=this.dialog.createId("borderStyle");var n=[];g.appendChild(r);this.inputs.styles.borderStyle=r;h=["none","dotted","dashed","solid","double","groove","ridge","inset","outset"];var m=e.style.borderStyle;if(m.match(/([^\s]*)\s/)){m=RegExp.$1}for(var p=0;p<h.length;p++){var t=h[p];a=u.createElement("option");a.value=t;a.innerHTML=t;if(t==m){a.selected=true}r.appendChild(a)}r.style.marginRight="0.5em";function c(x){for(var v=0;v<n.length;++v){var w=n[v];w.style.visibility=x?"hidden":"visible";if(!x&&(w.tagName.toLowerCase()=="input")){w.focus();w.select()}}}r.onchange=function(){c(this.value=="none")};l=u.createElement("input");l.name=this.dialog.createId("borderWidth");n.push(l);l.type="text";this.inputs.styles.borderWidth=l;l.value=Xinha.InlineStyler.getLength(e.style.borderWidth);l.size="5";g.appendChild(l);l.style.marginRight="0.5em";var o=u.createElement("span");o.innerHTML=Xinha._lc("pixels","TableOperations");g.appendChild(o);n.push(o);c(r.value=="none");if(e.tagName.toLowerCase()=="table"){d=u.createElement("tr");b.appendChild(d);g=u.createElement("td");g.className="label";d.appendChild(g);l=u.createElement("input");l.name=this.dialog.createId("borderCollapse");l.type="checkbox";l.value="on";this.inputs.styles.borderCollapse=l;l.id="f_st_borderCollapse";var t=(/collapse/i.test(e.style.borderCollapse));l.checked=t?1:0;g.appendChild(l);g=u.createElement("td");d.appendChild(g);var j=u.createElement("label");j.htmlFor="f_st_borderCollapse";j.innerHTML=Xinha._lc("Collapsed borders","TableOperations");g.appendChild(j)}return s};