/*
 * 
 * jQuery Google Charts plugin 0.9
 * 
 * $Date: 2009-02-19 11:56:22 +0100 (gio, 19 feb 2009) $
 * $Rev: 46 $
 * 
 * @requires
 * Sugar Arrays - Dustin Diaz | http://www.dustindiaz.com
 * 
 * Copyright (c) 2008 Massimiliano Balestrieri
 * Examples and docs at: http://maxb.net/blog/
 * Licensed GPL licenses:
 * http://www.gnu.org/licenses/gpl.html
 *
 */

if(!window.jGCharts){jGCharts={}}jGCharts.Api=function(){var G=0;var h=0;var C=0;var an=0;var g="http://chart.apis.google.com/chart?";var p={type:"cht",size:"chs",data:"chd",colors:"chco",scaling:"chds",axis_type:"chxt",axis_range:"chxr",axis_labels:"chxl",legend:"chdl",bar_width:"chbh",background:"chf",fillarea:"chm",title:"chtt",title_style:"chts",grid:"chg",line_style:"chls",agent:"agent"};var N=false;var ak=false;var ad=false;var E=false;var Z=false;var q=false;var S=false;var ap="bvg";var j="300x200";var T=false;var R=false;var am=false;var ao=false;var W=[];var X=1;var e="x,y";var al=false;var H=false;var I=false;var ae=false;var af="solid";var B="solid";var ab=90;var V=90;var y=10;var s=10;var aj=false;var w=false;var J=false;var i=false;var ac=false;var u=20;var l=1;var aa=false;var x=10;var A=10;var Q=10;var k=0;var U=false;var r=["5131C9","FFCC00","DA1B1B","FF9900","FF6600","CCFFFF","CCFF00","CCCCCC","FF99CC","999900","999999","66FF00","66CC00","669900","660099","33CC00","333399","000000"];var ag="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function D(at,av){var au=[];for(var aq=0;aq<at.length;aq++){var ar=at[aq];if(!isNaN(ar)&&ar>=0){au.push(ag.charAt(Math.round((ag.length-1)*ar/av)))}else{au.push("_")}}return au.join("")}function P(){var aq=u;if(l){aq+=","+l}return aq}function K(){if(!ao.constructor==Array){throw new Error("Legend must be Array")}var ar="";for(var aq=0;aq<ao.length;aq++){ar+=ao[aq]+"|"}ar=O(ar,"|");return ar}function ai(){if(!am.constructor==Array){throw new Error("Data must be Array")}var ar="";var at=[];for(var aq=0;aq<am.length;aq++){if(am[aq].constructor!=Array){am[aq]=[am[aq]]}for(var au=0;au<am[aq].length;au++){if(!at[au]){at[au]=[]}at[au].push((am[aq][au]));if(at[au].length>h){h=at[au].length;G=am[aq].length}}if(N){L(sum(am[aq]));d(sum(am[aq]))}else{L(am[aq]);d(am[aq])}}if(E&&ac){at=c(at)}if(E&&i){at=o(at)}for(var au=0;au<at.length;au++){ar+=D(at[au],C)+","}ar=O(ar,",");return"s:"+ar}function o(at){var ar=[];for(var aq=1;aq<=h;aq++){ar.push(0)}at.push(ar);return at}function c(ar){var at=[];for(var aq=1;aq<=h;aq++){at.push(C)}ar.unshift(at);return ar}function M(){var at="";var au="";var ar=G;if(E&&ac){ar++}for(var aq=0;aq<ar;aq++){au=_colors[aq]||r[aq];at+=au+","}at=O(at,",");return at}function z(){return an+","+C}function L(aq){if(aq.constructor==Array){aq.forEach(function(ar){L(ar)})}else{if(C<aq){C=aq}}}function d(aq){if(aq.constructor==Array){aq.forEach(function(ar){d(ar)})}else{if(an>aq){an=aq}}}function F(){return"0,"+an+","+C+"|1,"+an+","+C}function f(){var au="";if(W.length==0&&h>10){X=parseInt(h/10)}if(ak){var ar=[];for(var aq=W.length;aq>0;aq--){ar.push(W[(aq-1)])}W=ar}for(var aq=0;aq<h;aq++){var av=(aq%X)==0?(W[aq]||aq):"";au+=av+"|"}au=O(au,"|");var at=(ak)?1:0;return at+":|"+au}function n(){var aq=a(af);var at=a(B);var ar="";if(al&&aj){al+=parseInt(aj)}if(al&&aq=="s"){ar="bg,s,"+al}if(al&&aq=="lg"){ar="bg,lg,"+ab+","+al+",0,"+I+",1"}if(al&&aq=="ls"){ar="bg,ls,"+ab+","+al+",0."+parseInt(y/10)+","+I+",0."+parseInt(y/10)}if(H&&w){H+=parseInt(w)}if(H&&al){ar+="|"}if(H&&at=="s"){ar+="c,s,"+H}if(H&&at=="lg"){ar+="c,lg,"+V+","+H+",0,"+ae+",1"}if(H&&at=="ls"){ar+="c,ls,"+V+","+H+",0."+parseInt(s/10)+","+ae+",0."+parseInt(s/10)}return ar}function a(aq){if(aq=="solid"){return"s"}if(aq=="gradient"){return"lg"}if(aq=="stripes"){return"ls"}return aq}function b(){var aq=[];var ar="";if(E){aq=M(_colors,ac).split(",");aq.forEach(function(au,at){ar+="b,"+au+","+at+","+(at+1)+",0|"});ar=O(ar,"|")}return ar}function Y(){var aq="";if(A>=0){aq+=A}if(x>=0){aq+=","+x}if(Q>=0){aq+=","+Q}if(k>=0){aq+=","+k}return aq}function t(){var aq="";U.forEach(function(ar){aq+=ar.join(",")+"|"});aq=O(aq,"|");return aq}function ah(aq){if(jGCharts.Api.type.indexOf(aq.type)!==-1){ap=aq.type}if(aq.size){j=aq.size}if(aq.data){am=aq.data}if(aq.legend){ao=aq.legend}if(aq.axis_labels){W=aq.axis_labels}if(aq.axis_step){X=aq.axis_step}if(aq.colors){_colors=aq.colors}else{_colors=[]}if(aq.lines){U=aq.lines}if(aq.title){T=aq.title}if(aq.title_color&&aq.title_size){R=aq.title_color+","+aq.title_size}if(aq.bar_width){u=aq.bar_width}if(aq.bar_spacing>=0){l=aq.bar_spacing}if(aq.fillarea){J=aq.fillarea}if(aq.fillbottom){i=aq.fillbottom}if(aq.filltop){ac=aq.filltop}if(aq.axis_type){e=aq.axis_type}if(aq.bg){al=aq.bg}if(aq.bg_type){af=aq.bg_type}if(aq.bg_offset){I=aq.bg_offset}if(aq.bg_width){y=aq.bg_width}if(aq.bg_angle>=0){ab=aq.bg_angle}if(aq.bg_trasparency){aj=aq.bg_trasparency}if(aq.chbg){H=aq.chbg}if(aq.chbg_type){B=aq.chbg_type}if(aq.chbg_offset){ae=aq.chbg_offset}if(aq.chbg_width){s=aq.chbg_width}if(aq.chbg_angle>=0){V=aq.chbg_angle}if(aq.chbg_trasparency){w=aq.chbg_trasparency}if(aq.grid){aa=aq.grid;if(aq.grid_x>=0){A=aq.grid_x}if(aq.grid_y>=0){x=aq.grid_y}if(aq.grid_line>=0){Q=aq.grid_line}if(aq.grid_blank>=0){k=aq.grid_blank}}}function m(ar,au,at){var aq=at?"":"&";return p[ar]+"="+au+aq}function v(){ad=ap.indexOf("v")!==-1;ak=ap.indexOf("h")!==-1;N=ap.indexOf("s")!==-1&&ap!="ls"&&ap!="lc";q=(ap=="ls"||ap=="lc");S=(ap=="p"||ap=="p3");E=q&&J;Z=ap.indexOf("b")!==-1}function O(ar,aq){return(ar.lastIndexOf(aq)!==-1)?ar.substr(0,ar.lastIndexOf(aq)):ar}return{make:function(ar){var aq=g;ah(ar);v();aq+=m("type",ap);aq+=m("size",j);if(T){aq+=m("title",T)}if(R){aq+=m("title_style",R)}if(Z){aq+=m("bar_width",P())}aq+=m("axis_type",e);if(!S&&ao.length>0){aq+=m("legend",K())}aq+=m("data",ai());aq+=m("scaling",z());aq+=m("axis_range",F());aq+=m("axis_labels",f());aq+=m("background",n());aq+=m("colors",M());if(q&&U){aq+=m("line_style",t())}if(aa){aq+=m("grid",Y())}if(q&&E){aq+=m("fillarea",b())}aq+=m("agent","jgcharts",true);return aq}}};jGCharts.Api.type=["bhs","bvs","bhg","bvg","lc","ls","p","p3"];function sum(a){return foldl(a,0,function(c,b){return c+b})}function foldl(a,d,c){for(var b=0;b<a.length;b++){d=c(d,a[b])}return d}Function.prototype.method=function(a,b){this.prototype[a]=b;return this};if(!Array.prototype.forEach){Array.method("forEach",function(d,e){var c=e||window;for(var b=0,a=this.length;b<a;++b){d.call(c,this[b],b,this)}}).method("every",function(d,e){var c=e||window;for(var b=0,a=this.length;b<a;++b){if(!d.call(c,this[b],b,this)){return false}}return true}).method("some",function(d,e){var c=e||window;for(var b=0,a=this.length;b<a;++b){if(d.call(c,this[b],b,this)){return true}}return false}).method("map",function(f,g){var e=g||window;var b=[];for(var d=0,c=this.length;d<c;++d){b.push(f.call(e,this[d],d,this))}return b}).method("filter",function(f,g){var e=g||window;var b=[];for(var d=0,c=this.length;d<c;++d){if(!f.call(e,this[d],d,this)){continue}b.push(this[d])}return b}).method("indexOf",function(c,d){var d=d||0;for(var b=d,a=this.length;b<a;++b){if(this[b]===c){return b}}return -1}).method("lastIndexOf",function(b,c){var c=c||this.length;if(c>=this.length){c=this.length}if(c<0){c=this.length+c}for(var a=c;a>=0;--a){if(this[a]===b){return a}}return -1})}jGCharts.Base={init:function(a){a=jQuery.extend({},a);return this.each(function(){if(!a.data){throw new Error("No Data")}var c=new jGCharts.Api();var b=c.make(a);jQuery("<img>").attr("src",b).appendTo(this);jQuery("<p>"+b+"</p>").appendTo(this)})}};jQuery.fn.jgcharts=jGCharts.Base.init;