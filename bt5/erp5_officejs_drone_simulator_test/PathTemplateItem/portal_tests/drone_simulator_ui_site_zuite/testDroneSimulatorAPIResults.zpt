<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Test Drone Simulator OJS app</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">Test RenderJS UI</td></tr>
</thead><tbody>
<tal:block metal:use-macro="here/Zuite_CommonTemplate/macros/init" />

<!-- Go to site -->
<tr>
  <td>open</td>
  <td>${base_url}/web_site_module/officejs_drone_simulator/app/#/?page=drone_simulator_unit_test</td>
  <td></td>
</tr>
<!-- Check form -->
<tr>
  <td>waitForElementPresent</td>
  <td>//div[contains(@data-gadget-url, 'gadget_erp5_page_drone_simulator_unit_test.html')]</td>
  <td></td>
<tr>
<tr>
  <td>waitForElementPresent</td>
  <td>//label[text()='Simulation Speed']</td>
  <td></td>
<tr>
<tr>
  <td>waitForElementPresent</td>
  <td>//textarea[@id="script"]</td>
  <td></td>
<tr>
<!-- Run simulator -->
<tr>
  <td>pause</td>
  <td>3000</td>
  <td></td>
</tr>
<tr>
  <td>click</td>
  <td>//div[contains(@data-gadget-url, 'gadget_erp5_page_drone_simulator_unit_test.html')]//input[@type="submit" and @name="action_run"]</td>
  <td></td>
</tr>
<!-- Check simulator gadget and babylon lib -->
<tr>
  <td>waitForElementPresent</td>
  <td>//span[@id="loading"]</td>
  <td></td>
</tr>
<tr>
  <td>waitForElementPresent</td>
  <td>//div[contains(@data-gadget-url, 'gadget_erp5_page_drone_simulator_gadget.html')]</td>
  <td></td>
</tr>
<tr>
  <td>waitForElementPresent</td>
  <td>//div[contains(@data-gadget-url, 'gadget_erp5_page_drone_simulator_gadget.html')]//canvas[contains(@data-engine, 'Babylon.js')]</td>
  <td></td>
</tr>
<tr>
  <td>waitForElementPresent</td>
  <td>//div[@class="container"]//a[contains(text(), 'Download Simulation LOG')]</td>
  <td></td>
</tr>
<tr>
  <td>assertTextPresent</td>
  <td>timestamp;;latitude;;longitude;;AMSL (m);;rel altitude (m);;pitch (Â°);;roll(Â°);;yaw(Â°);;air speed (m/s);;throttle(%);;climb rate(m/s)16.666666666666668;45.6412;14.265800000000013;610.328;151666.6666666666686;45.641208877177;14.265770351739434;610.3160936134835;14.988093613483513333.3333333333253;45.64123568804494;14.265680808003026;610.280133920873;14.9521339208731025000.000000000002;45.6412804326038;14.265531368790732;610.2201209221688;14.8921209221687756666.666666666699;45.64134311085358;14.265322034102553;610.1360546173705;14.808054617370538316.666666666722;45.64142093303432;14.265062121262076;610.0316767320827;14.7036767320827189983.333333333328;45.64150208845468;14.264791075968475;609.9228281868893;14.59482818688932111649.999999999935;45.64158324387505;14.264520030674902;609.8139796416959;14.48597964169592513316.66666666654;45.64166439929541;14.2642489853813;609.7051310965026;14.37713109650252914966.66666666648;45.64174474316157;14.263980650540645;609.597371036761;14.26937103676106716633.333333333114;45.64182589858193;14.263709605247044;609.4885224915677;14.1605224915676718299.9999999999;45.64190705400229;14.263438559953443;609.3796739463743;14.05167394637427419966.66666666669;45.64198820942266;14.263167514659841;609.2708254011809;13.94282540118087821616.66666666681;45.64206855328881;14.262899179819186;609.1630653414394;13.83506534143941623283.333333333598;45.64214970870918;14.262628134525585;609.054216796246;13.7262167962460224950.000000000386;45.64223086412954;14.262357089231983;608.9453682510526;13.61736825105262326616.666666667174;45.6423120195499;14.26208604393841;608.8365197058592;13.50851970585922728283.33333333396;45.642393174970266;14.261814998644809;608.7276711606657;13.3996711606658329933.33333333408;45.64247351883642;14.261546663804154;608.6199111009244;13.29191110092436831600.00000000087;45.642554674256786;14.261275618510552;608.511062555731;13.18306255573097233266.66666666755;45.64263582967715;14.261004573216951;608.4022140105376;13.07421401053757634933.333333333976;45.64271698509751;14.26073352792335;608.2933654653442;12.9653654653441836583.333333333736;45.642797328963674;14.260465193082695;608.1856054056027;12.85760540560271738250.00000000016;45.64287848438403;14.260194147789093;608.0767568604093;12.7487568604093239916.666666666584;45.642959639804396;14.259923102495492;607.9679083152159;12.63990831521592541583.33333333301;45.643040795224756;14.259652057201919;607.8590597700226;12.53105977002252843233.33333333277;45.64312113909092;14.259383722361264;607.751299710281;12.42329971028106644899.99999999919;45.64320229451128;14.259112677067662;607.6424511650877;12.3144511650876746566.66666666562;45.643283449931644;14.258841631774061;607.5336026198943;12.20560261989427448233.33333333204;45.643364605352;14.25857058648046;607.4247540747009;12.09675407470087749899.999999998465;45.643445760772366;14.258299541186858;607.3159055295074;11.98790552950748151549.999999998225;45.64352610463853;14.258031206346203;607.208145469766;11.88014546976601953216.66666666465;45.64360726005889;14.257760161052602;607.0992969245726;11.77129692457262254883.33333333107;45.643688415479254;14.257489115759029;606.9904483793792;11.66244837937922656549.9999999975;45.64376957089962;14.257218070465427;606.8815998341857;11.5535998341858358199.99999999726;45.643849914765774;14.256949735624772;606.7738397744444;11.44583977444436859866.66666666368;45.64393107018614;14.25667869033117;606.664991229251;11.33699122925097161533.333333330105;45.6440122256065;14.25640764503757;606.5561426840576;11.22814268405757563199.99999999653;45.64409338102686;14.256136599743968;606.4472941388642;11.11929413886417964849.99999999629;45.64417372489302;14.255868264903313;606.3395340791227;11.01153407912271766516.66666666314;45.64425488031338;14.255597219609712;606.2306855339293;10.9026855339293268183.33333333029;45.64433603573375;14.25532617431611;606.1218369887359;10.79383698873592469849.99999999744;45.64441719115411;14.255055129022537;606.0129884435426;10.68498844354252871516.66666666459;45.64449834657447;14.254784083728936;605.9041398983491;10.57613989834913173166.66666666507;45.64457869044063;14.25451574888828;605.7963798386077;10.4683798386076774833.33333333222;45.64465984586099;14.25424470359468;605.6875312934143;10.35953129341427376499.99999999937;45.64474100128135;14.253973658301078;605.5786827482209;10.25068274822087778166.66666666653;45.64482215670172;14.253702613007476;605.4698342030274;10.1418342030274879816.666666667;45.64490250056787;14.253434278166822;605.362074143286;10.03407414328601881483.33333333416;45.64498365598824;14.25316323287322;605.2532255980926;9.92522559809262283150.00000000131;45.6450648114086;14.252892187579619;605.1443770528992;9.81637705289922684816.66666666846;45.64514596682896;14.252621142286074;605.0355285077057;9.7075285077058386466.66666666894;45.64522631069512;14.25235280744539;604.9277684479644;9.59976844796436788133.3333333361;45.64530746611548;14.25208176215179;604.818919902771;9.4909199027709789800.00000000325;45.64538862153585;14.251810716858188;604.7100713575776;9.38207135757757491466.6666666704;45.64546977695621;14.251539671564586;604.6012228123842;9.27322281238417893116.66666667088;45.64555012082238;14.251271336723931;604.4934627526427;9.16546275264271694783.33333333803;45.64563127624274;14.25100029143033;604.3846142074493;9.0566142074493296450.00000000518;45.64571243166311;14.250729246136729;604.2757656622559;8.94776566225592398116.66666667233;45.64579358708346;14.250458200843127;604.1669171170626;8.83891711706252799783.33333333948;45.64587474250382;14.250187155549582;604.0580685718691;8.73006857186913</td>
  <td></td>
</tr>
</tbody></table>
</body>
</html>