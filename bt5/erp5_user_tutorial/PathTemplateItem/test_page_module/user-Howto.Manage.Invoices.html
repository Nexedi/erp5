    
      <section class="illustration">
        <h1>How to manage Invoices</h1>
        <img alt="Invoice Sample" title="Invoice Sample" type="image/png" src="http://img.erp5.cn/user-Howto.Manage.Invoices.Invoice?format=png">
        <footer>
          by <a href="http://www.osoe-project.org/contact">OSOE Project</a>.
        </footer>
        <details open="open">
          <p>
            Now that we have learned how to how to generate invoices from Sales Packing Lists in the previous tutorial <a href="user-Howto.Manage.Packing.Lists/view">"How to Manage Packing Lists"</a>, we are going to explain now <strong>how to manage and how to print the invoices.</strong>
          </p>
        </details>
        <test>
          <table style="display: none;" class="test">
            <tbody>
              <tr style="opacity: 1;">
                <td colspan="3">&lt;span metal:use-macro="container/Zuite_viewTestMacroLibrary/macros/init_test_environment"&gt;init&lt;/span&gt;</td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td>openAndWait</td>
                <td>${base_url}/Zuite_createFunctionalTestUser</td>
                <td></td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td>verifyTextPresent</td>
                <td>Done.</td>
                <td></td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td colspan="3">&lt;span metal:use-macro="container/Zuite_viewTestMacroLibrary/macros/wait_for_activities"&gt; Wait for activities &lt;/span&gt;</td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td>openAndWait</td>
                <td>${base_url}/Zuite_setUpSaleOrderTest</td>
                <td></td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td>verifyTextPresent</td>
                <td>Init Ok</td>
                <td></td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td colspan="3">&lt;span metal:use-macro="container/Zuite_viewTestMacroLibrary/macros/wait_for_activities"&gt; Wait for activities &lt;/span&gt;</td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td>openAndWait</td>
                <td>${base_url}/Zuite_setUpSalePackingListTest</td>
                <td></td>
              </tr>
              <tr>
                <td>verifyTextPresent</td>
                <td>Init Ok</td>
                <td></td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td colspan="3">&lt;span metal:use-macro="container/Zuite_viewTestMacroLibrary/macros/invoke_simulation_alarms"&gt; Invoke simulation alarms &lt;/span&gt;</td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td>openAndWait</td>
                <td>${base_url}/Zuite_setUpSaleInvoiceTest</td>
                <td></td>
              </tr>
              <tr>
                <td>verifyTextPresent</td>
                <td>Init Ok</td>
                <td></td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td colspan="3">&lt;span metal:use-macro="container/Zuite_viewTestMacroLibrary/macros/invoke_simulation_alarms"&gt; Invoke simulation alarms &lt;/span&gt;</td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td colspan="3">&lt;span metal:use-macro="container/Zuite_viewTestMacroLibrary/macros/wait_for_activities"&gt; Wait for activities &lt;/span&gt;</td>
              </tr>
              <tr style="opacity: 1;">
                <td colspan="3">&lt;span metal:use-macro="container/Zuite_viewTestMacroLibrary/macros/login_as_functional_test_user"&gt;Login As Functional Test User&lt;/span&gt;</td>
              </tr>
            </tbody>
          </table>
        </test>
      </section><section class="">
        <h1>Agenda</h1>
        <ul>
          <li>How to reach an invoice</li>
          <li>How to start, validate and close transaction</li>
          <li>How to print an invoice</li>
        </ul>
      </section><section class="screenshot">
        <h1>Reach the Invoice: reach the Packing List</h1>
        <img alt="Sale Packing List Module" title="Sale Packing List Module" src="http://img.erp5.cn/user-Howto.Manage.Invoices.Reach.Invoice.Packing.Lists.Module?format=png" type="image/png">
        <details open="open">
          <p>
            If you want to edit the sale invoice, you will have to <strong>locate it first</strong>
            . This is a two step procedure:
          </p><p>
            First, browse the existing Sale Packing Lists from the home menu or the Modules menu, the same you would have done for persons or organisations. Please refer to the <a href="user-Howto.Create.Persons/view">"How to create Persons"</a> or <a href="user-Howto.Create.Organisations/view">"How to create Organisations"</a> tutorials for more information.
          </p>
        </details>
        <test>
          <table style="display: none;" class="test">
            <tbody>
              <tr style="opacity: 1; z-index: 0;">
                <td>openAndWait</td>
                <td>${base_url}</td>
                <td></td>
              </tr>
              <tr>
                <td>selectAndWait</td>
                <td>//select[@name="select_module"]</td>
                <td>Sale Packing Lists</td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td colspan="3">&lt;tal:block tal:content="structure python: here.Zuite_generateListboxBrowsing(listbox_selection=(['title', 'ZUITE-TEST-SALEORDER-PRODUCT-001'],), enter_object=True)"/&gt;</td>
              </tr>
              <tr>
                <td>verifyText</td>
                <td>//div[@id="breadcrumb"]/a[2]</td>
                <td>Sale Packing Lists</td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td>verifyText</td>
                <td>//div[@id="breadcrumb"]/a[3]</td>
                <td>ZUITE-TEST-SALEORDER-PRODUCT-001</td>
              </tr>
            </tbody>
          </table>
        </test>
      </section><section class="screenshot">
        <h1>Reach the Invoice: jump to "Related Sale Invoice Transaction"</h1>
        <img alt="Related Sale Invoice Transaction" title="Related Sale Invoice Transaction" src="http://img.erp5.cn/user-Howto.Manage.Sale.Packing.Lists.Jump.To.Related.Invoice?format=png" type="image/png">
        <details open="open">
          <p>
            Now you can <strong>reach</strong>
            the sale invoice directly from the related Sale Packing List.
          </p><p>
            First, <strong>make sure that the Packing List has been shipped or delivered</strong>
            . You can find that information on the View tab of the Sales Packing List “State”.
          </p><p>
            Now that you have checked the status, please browse the “Jump to “ menu, and  click on the line <strong>"Related Sale Invoice Transaction"</strong>
            . Then you will be directed to the related sales invoice.
          </p><p>
            Note that an error may return: <strong>"No Related Sale Invoice Transaction"</strong>
            . This means that either the Sale Packing List status is not appropriate, or you just changed the status, and you have to wait at least 30 seconds for the system to take the changes into account.
          </p>
        </details>
        <test>
          <table style="display: none;" class="test">
            <tbody>
              <tr>
                <td>selectAndWait</td>
                <td>//select[@name="select_jump"]</td>
                <td>Related Sale Invoice Transaction</td>
              </tr>
              <tr>
                <td>verifyText</td>
                <td>//div[@id="breadcrumb"]/a[1]</td>
                <td>ERP5</td>
              </tr>
              <tr>
                <td>verifyText</td>
                <td>//div[@id="breadcrumb"]/a[2]</td>
                <td>Accounting</td>
              </tr>
              <tr>
                <td>storeAttribute</td>
                <td>//div[@id="breadcrumb"]/a[3]@href</td>
                <td>invoice</td>
              </tr>
              <tr style="opacity: 1;">
                <td colspan="3">&lt;span metal:use-macro="container/Zuite_viewTestMacroLibrary/macros/wait_for_activities"&gt; Wait for activities &lt;/span&gt;</td>
              </tr>
              <tr>
                <td>open</td>
                <td>${invoice}</td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </test>
      </section><section class="screenshot">
        <h1>Check Sale Invoice Tabs</h1>
        <img alt="Check Sale Invoice Tabs" title="Check Sale Invoice Tabs" src="http://img.erp5.cn/user-Howto.Manage.Invoices.Invoice.View.Tabs?format=png" type="image/png">
        <details open="open">
          <p>Reading the message that appears in red on top of the invoice document, you will notice that you landed on the related sale invoice.The tabs of this invoice document incorporates lots of information, which comes directly from the initial Sale Order as well as from the Sale Packing List.</p><p>
            In theory, there should not be anything here to fill out. The first step before trying to start the accounting transaction, is to <strong>check that the information provided by the sale invoice is correct</strong>
            . As most fields have been updated with your information, there shouldn't be any changes to implement, but one can never know, so we recommend you to check the information in every tab in your invoice document.
          </p><p>
            When complete, <strong>click on the "Accounting View" tab</strong>
            , and jump to the next page to
            <strong>start the accounting transaction of the order</strong>
            .
          </p>
        </details>
        <test>
          <table style="display: none;" class="test">
            <tbody></tbody>
          </table>
        </test>
      </section><section class="screenshot">
        <h1>Journalise Transaction</h1>
        <img alt="Journalise Transaction" title="Journalise Transaction" src="http://img.erp5.cn/user-Howto.Manage.Invoices.Journalise.Transaction?format=png" type="image/png">
        <details open="open">
          <p>
            In order to do an accounting transaction you have to <strong>initiate it</strong>
            .
          </p><p>
            An accounting transaction is a three step procedure :<br>
            First, you need to start the transaction, which means that the accounting lines will be created. In accounting terms, this is called
            <strong>Journalise Transaction</strong>
            . The second step is to validate the transaction, once you have checked the different accounting lines that have been generated automatically by ERP5. In accounting terms, this is called
            <strong>Post Transaction To General Ledger</strong>
            . Once those two steps are over, you can
            <strong>Definitively Close Accounting Transaction</strong>
            .
          </p><p>Be careful: once the transaction is closed, you will not be able to modify it. This is why some companies do not close their transactions until the end of their accounting period.</p><p>
            As you can see in the screenshot of the "Accounting View" tab of the invoice, the state is "Confirmed", and there is not any "Accounting Transaction Lines" yet. To start the transaction, browse the “Action” menu on top of the page and click on the line <strong>"Journalise Transaction"</strong>
            , then you will see on the next page, that this will
            <strong>create the first accounting lines</strong>
            .
          </p>
        </details>
        <test>
          <table style="display: none;" class="test">
            <tbody>
              <tr>
                <td>selectAndWait</td>
                <td>//select[@name="select_action"]</td>
                <td>Journalise Transaction</td>
              </tr>
              <tr>
                <td>clickAndWait</td>
                <td>//button[@id="dialog_submit_button"]</td>
                <td></td>
              </tr>
              <tr>
                <td>verifyText</td>
                <td>//label[normalize-space(text())='State']/../div</td>
                <td>Journalised</td>
              </tr>
              <tr style="opacity: 1;">
                <td colspan="3">&lt;span metal:use-macro="container/Zuite_viewTestMacroLibrary/macros/wait_for_activities"&gt; Wait for activities &lt;/span&gt;</td>
              </tr>
              <tr>
                <td>open</td>
                <td>${invoice}</td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </test>
      </section><section class="screenshot">
        <h1>Check the Accounting Transaction Lines</h1>
        <img alt="Accounting Lines to Check" title="Accounting Lines to Check" src="http://img.erp5.cn/user-Howto.Manage.Invoices.Check.Accounting.Lines?format=png" type="image/png">
        <details open="open">
          <p>Before trying to go further in the accounting process, we will analyse what changes occurred to the invoice document after we journalised the transaction.</p><p>First, as you can see in red in the screenshot, the state has changed from "Confirmed" to "Journalised". This means that ERP5 has created some accounting lines for your transaction.</p>

<p><strong>Note: </strong>It can take up to 5 minutes until the accounting lines have been created. You might have to refresh the page, if you don't see the accounting lines.</p>

<p>This is the second part of the analysis: as you can see in blue, the first accounting transaction lines have been created. They are automatically created by ERP5, and, if you can read the accounting lines, they represent your transaction. In our example, the sell account should be credited with 100000€. If you did not yet subscribe to ERP5, you may not know that more than one accounting plan is available. On this screenshot, the French accounting plan is used, but many others are available. We already have accounting plans catered especially for Africa and Japan, and we are constantly working on developing more plans that will be available soon.</p><p>Note that a transaction can be modified as long as it is at "Journalised" state.</p><p>
            <strong>However, even though the accounting transaction lines have been created, they have not been validated yet</strong>.
            To validate the transaction, you have to "Post to General Ledger". Please see the next page.
          </p>
        </details>
        <test>
          <table style="display: none;" class="test">
            <tbody></tbody>
          </table>
        </test>
      </section><section class="screenshot">
        <h1>Post Transaction</h1>
        <img src="http://img.erp5.cn/user-Howto.Manage.Invoices.Post.Transaction.To.General.Ledger?format=png" type="image/png" title="Post Transaction To General Ledger" alt="Post Transaction To General Ledger">
        <details open="open">
          <p>Once you have checked all the accounting transaction lines, you can validate them.</p><p>
            To do so, please browse the “Action” menu and choose <strong>"Post Transaction to General Ledger"</strong>
            .</p><p>
            It may occur at this point that you receive an error message, stating "Date is not in a started Accounding Period for source Section". If you do not receive this error message please jump to the next section "Validated Transaction".
            If the error does occur, please return to the homepage after saving all the progress you have made so far. Open the organization you wish to post a transaction for, which in our case is the company Hongzhao. 
            Navigate to the <strong>Financial Information</strong> tab. As you can see there is an accounting period in the state "Started" titled "2015". Click on this line to navigate to the corresponding view tab. 
            Using the action list, select "cancel accounting period" and validate this action. Once the accounting period is cancelled, create a new accounting period by selecting the corresponding command in the action item list on the <strong>Financial Information</strong> tab of your organization.
            Next, give the accounting period an appropriate name and select a starting and end date, so that the accounting operation date of the transaction you wish to post lies between them. Finally, select the command "Start Accounting Period" in the action item list. 
            You will now be able to post the transaction to the general ledger and complete the rest of the session.  
          </p>
        </details>
        <test>
          <table style="display: none;" class="test">
            <tbody>
              <tr>
                <td>selectAndWait</td>
                <td>//select[@name="select_action"]</td>
                <td>Post Transaction to General Ledger</td>
              </tr>
              <tr>
                <td>clickAndWait</td>
                <td>//button[@id="dialog_submit_button"]</td>
                <td></td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td>verifyText</td>
                <td>//label[normalize-space(text())='State']/../div</td>
                <td>Posted to General Ledger</td>
              </tr>
            </tbody>
          </table>
        </test>
      </section><section class="screenshot">
        <h1>Validated transaction</h1>
        <img alt="Validated transaction" title="Validated transaction" type="image/svg+xml" src="http://img.erp5.cn/user-Howto.Manage.Invoices.Transaction.Validted?format=png">
        <details open="open">
          <p>
            After "Post to General Ledger", as shown in the screenshot, the invoice state changed from "Journalised" to <strong>"Posted to General Ledger"</strong>
            . In fact, this state is similar to "Journalised", unless it has to be seen as a transition state between “Journalise” and “ Definitely Closed” state to indicate that the transaction has been validated.
          </p><p>
            When validated by acting "Post Transaction to General Ledger", a transaction can still be modified. If you browse the action menu, you will find a line that is called <strong>"Restart Transaction (journalise)"</strong>
            , which helps you invalidate the transaction and return it to the “Journalised” state.
          </p><p>
            Now the <strong>“Post Transaction to General Ledger” action insures that the transaction has been accepted, and the management has been transferred from the sales department to the accounting department</strong>
            .
          </p><p>Once this is done, the next step will be to close the transaction, as shown on the next page.</p>
        </details>
      </section><section class="screenshot">
        <h1>Definitively Close Transaction</h1>
        <img alt="Definitively Close Accounting Action" title="Definitively Close Accounting Action" src="http://img.erp5.cn/user-Howto.Manage.Invoices.Definitely.Close.Transaction?format=png" type="image/png">
        <details open="open">
          <p>
            The very last step of managing an invoice is to “<strong>Definitively Close</strong>
            ” the accounting transaction.
          </p><p>
            Once this is done, <strong>you will not be able to go back to another state</strong>
            , which means that you will not have the possibility to modify the transaction.
          </p><p>
            <strong>Close the transaction only when you are absolutely sure that the details, figures, etc. are correct</strong>
            . Some companies for instance, are accustomed to closing all the transactions at the end of the year.
          </p><p>
            To <strong>close a transaction</strong>
            , browse the “Action” menu and choose “
            <strong>Definitively Close Transaction</strong>
            ”. Once this is done, the state of the transaction will be changed from "Posted to General Ledger" to
            <strong>Closed</strong>
            , and you will be able to
            <strong>create a payment</strong>
            for it, as we will see on the next tutorial “How to create a Payment”.
          </p>
        </details>
        <test>
          <table style="display: none;" class="test">
            <tbody>
              <tr>
                <td>selectAndWait</td>
                <td>//select[@name="select_action"]</td>
                <td>Definitively Close Transaction</td>
              </tr>
              <tr>
                <td>clickAndWait</td>
                <td>//button[@id="dialog_submit_button"]</td>
                <td></td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td>verifyText</td>
                <td>//label[normalize-space(text())='State']/../div</td>
                <td>Closed</td>
              </tr>
            </tbody>
          </table>
        </test>
      </section><section class="screenshot">
        <h1>Printing the invoice (1)</h1>
        <img alt="Print Button" title="Print Button" src="http://img.erp5.cn/user-Howto.Manage.Invoices.Closed.Transaction.Print?format=png" type="image/png">
        <details open="open">
          <p>
            ERP5 allows you to <strong>print</strong>
            the invoices you have created.
          </p><p>
            We will now explain how you can easily <strong>print</strong>
            an invoice you just created. You can print an invoice at any state, even if the transaction is not closed yet.
          </p><p>
            The first step to print an invoice, is to click on the
            <strong>Printer</strong>
            button on top of the invoice sheet, as you can see on the screenshot.
          </p><p>
            Clicking this icon will open a new window in which you will be able to change the settings of the <strong>Print</strong>
            .
          </p>
        </details>
        <test>
          <table style="display: none;" class="test">
            <tbody></tbody>
          </table>
        </test>
      </section><section class="screenshot">
        <h1>Printing the invoice (2)</h1>
        <img alt="Print Sale Invoice Transaction Dialog" title="Print Sale Invoice Transaction Dialog" src="http://img.erp5.cn/user-Howto.Manage.Invoices.Closed.Transaction.Print.Options?format=png" type="image/png">
        <details open="open">
          <p>
            The <strong>print setting page</strong>
            is now open, so you can browse the different menus to choose which kind of print you need.
          </p><p>
            Firstly, <strong>choose the language</strong>
            of your print, in our example, the language can be either set to French or English. Secondly,
            <strong>choose the format</strong>
            of your print.
          </p><p>
            When you are done, <strong>click the option "Print Invoice"</strong>
            to create a physical copy of the document. You can either
            <strong>print directly with your printer</strong>
            , or
            <strong>save a copy of the invoice as a PDF or as an other format</strong>
            to keep it on your computer, so you can print it or send it by email later.
          </p>
        </details>
        <test>
          <table style="display: none;" class="test">
            <tbody>
              <tr style="opacity: 1;">
                <td colspan="3">&lt;span metal:use-macro="container/Zuite_viewTestMacroLibrary/macros/wait_for_activities"&gt; Wait for activities &lt;/span&gt;</td>
              </tr>
              <tr style="opacity: 1;">
                <td colspan="3">&lt;span metal:use-macro="container/Zuite_viewTestMacroLibrary/macros/login_as_manager"&gt;Login As Manager&lt;/span&gt;</td>
              </tr>
              <tr>
                <td>open</td>
                <td>${base_url}/Zuite_tearDownSaleOrderTest</td>
                <td></td>
              </tr>
              <tr>
                <td>verifyTextPresent</td>
                <td>Clean Ok</td>
                <td></td>
              </tr>
              <tr style="opacity: 1; z-index: 0;">
                <td colspan="3">&lt;span metal:use-macro="container/Zuite_viewTestMacroLibrary/macros/wait_for_activities"&gt; Wait for activities &lt;/span&gt;</td>
              </tr>
            </tbody>
          </table>
        </test>
      </section>
    