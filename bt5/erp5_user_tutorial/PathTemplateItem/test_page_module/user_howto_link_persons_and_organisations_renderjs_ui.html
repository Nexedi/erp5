<section class="master">
<h1>How to Link People to Organisations</h1>
<img alt="The photo of John Scott Doh and Z Commpany" src="user-Howto.Link.People.To.Organisations.Front.Page.John.Scott.Doh.Z.Company?format=png" title="Link people to organisations : John Scott Doh and Z Company" type="image/svg+xml" />
<footer>by <a href="http://www.osoe-project.org/contact">OSOE Team</a>.</footer>

<details open="open">
<p>This visual guide is part of a collection of documents created by the One Student One ERP (OSOE) project in collaboration with Institut Mines Telecom, Telecom Bretagne, Dresden University of Technology and the South Westfalia University of Applied Sciences. It can be used to teach modern ERP theory and practice to undergraduate students or professionals.</p>

<p><b>Copyright</b>: You are free to copy, distribute, display, and perform the work under the following conditions: you must attribute the work in the manner specified by the author or licensor; you may not use this work for any commercial purposes including training, consulting, advertising, self-advertising, publishing, etc.; you may not alter, transform, or build upon this work. For any reuse or distribution, you must make clear to others the license terms of this work. Any of these conditions can be waived if you get permission from the copyright holder through a commercial license or an educational license. For more information, contact info@nexedi.com</p>
</details>
<test>
<table class="test" style="display: none;">
	<tbody>
		<tr style="opacity: 1;">
			<td colspan="3">&lt;span metal:use-macro=&quot;container/Zuite_viewTestMacroLibrary/macros/init_test_environment&quot;&gt;init&lt;/span&gt;</td>
		</tr>
		<tr>
			<td>openAndWait</td>
			<td>${base_url}/Zuite_setUpPersonAndOrganisationLinkingTest</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>verifyTextPresent</td>
			<td>Init Ok</td>
			<td>&nbsp;</td>
		</tr>
		<tr style="opacity: 1;">
			<td colspan="3">&lt;span metal:use-macro=&quot;container/Zuite_viewTestMacroLibrary/macros/wait_for_activities&quot;&gt; Wait for activities &lt;/span&gt;</td>
		</tr>
		<tr style="opacity: 1;">
			<td colspan="3">&lt;span metal:use-macro=&quot;container/Zuite_viewTestMacroLibrary/macros/login_as_functional_test_user&quot;&gt;Login As Functional Test User&lt;/span&gt;</td>
		</tr>
	</tbody>
</table>
</test></section>

<section>
<h1>Agenda</h1>

<ul>
	<li>How to link a person to an existing organisation</li>
	<li>How to link a person to a new organisation</li>
</ul>

<details open="open">
<p>In this tutorial you will learn how to link people and organisations. You might have noticed in the previous tutorials that persons and organisations are very important in ERP5, because they are the core of your business.</p>

<p>We have already showed you how to link people to his/her organisation through the person creation process, but now we will examine some of the details in depth to show you how you can link a person to an existing organisation or to a new organisation. As we have used VIFIB example to created a person and an organisation in the previous two tutorials, now we will continue using those two entities to explain how to link them together.</p>
</details>
<test>
<table class="test" style="display: none;">
	<tbody>
	</tbody>
</table>
</test></section>

<section class="illustration">
<h1>Example</h1>
<img alt="Link people to organisations example: John Scott Doh and Z Company" src="user-Howto.Link.People.To.Organisations.Example.John.Scott.Doh.Z.Company?format=png" title="Link people to organisations example: John Scott Doh and Z Company" type="image/svg+xml" />
<details open="open">
<p>As we have created a person and an organisation in the first two tutorials, we are now going to use those two entities to explain how to link them together.</p>
</details>
<test>
<table class="test" style="display: none;">
	<tbody>
	</tbody>
</table>
</test></section>

<section class="screenshot">
<h1>Linking to an existing organisation</h1>
<img alt="Link people to exisiting organization in ERP5: Z Company" src="user-Howto.Link.People.To.Existing.Organisations.Z.Company?format=png" title="Link people to exisiting organization in ERP5: Z Company" type="image/svg+xml" />
<p>Already created in ERP5: <span style="color: green;">YES</span></p>

<details open="open">
<p>The easiest way to link a person to an organisation, is to create the organisation first. Once the organisation is created, you can link people to it by browsing the person&#39;s details and set the relationship with the existing organisation. As described in the previous tutorial, Z Company has already been created in ERP5, (see Tutorial &quot;How to create Organisations&quot;), we&#39;ll follow the organisation creation process to explain how to link a person to an existing organisation in ERP5.</p>
</details>
<test>
<table class="test" style="display: none;">
	<tbody>
	</tbody>
</table>
</test></section>

<section class="screenshot">
<h1>Go to the person&#39;s page (1) From ERP5 home menu</h1>

<p><img alt="Browse the 'Persons' database to reach the person's page" src="user-Howto.Add.People.Check.Creation.1.Modules.Persons.Svg?format=png" title="Check person creation (1): Click on the 'Modules' tab" type="image/svg+xml" /></p>

<details open="open">
<p>First, you need to go to the page of the person you want to link to the existing organisation. You can reach this page by clicking on &ldquo;Persons&rdquo; in the &ldquo;Modules&rdquo;page.</p>

<p>Click on &ldquo;Modules&rdquo; in the sidebar&nbsp; =&gt;&nbsp; Click on the &ldquo;Persons&rdquo;</p>
</details>
<test>
<table class="test" style="display: none;">
	<tbody>
		<tr>
			<td colspan="3">&lt;tal:block tal:define=&quot;click_configuration python: {&#39;text&#39;: &#39;Modules&#39;}&quot;&gt; &lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/click_on_panel_link&quot; /&gt; &lt;/tal:block&gt;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/wait_for_content_loaded&quot;&gt; &lt;/tal:block&gt;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;tal:block tal:define=&quot;click_configuration python: {&#39;text&#39;: &#39;Persons&#39;}&quot;&gt; &lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/click_on_page_link&quot;&gt; &lt;/tal:block&gt; &lt;/tal:block&gt;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/wait_for_content_loaded&quot;&gt;&lt;/tal:block&gt;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/wait_for_listbox_loaded&quot; /&gt;</td>
		</tr>
	</tbody>
</table>
</test></section>

<section class="screenshot">
<h1>Go to the person&#39;s page (2)</h1>
<img alt="Click on person's line to reach person's page" src="user-Howto.Add.People.Check.Creation.2.Persons.List.Svg?format=png" title="Click on person's line to reach person's page" type="image/svg+xml" />
<details open="">
<p>Click on the line representing the person who&#39;s details you want to browse.</p>

<p>In our case, simply click on the line &ldquo;John Doh&rdquo;. Then you will reach the page of John Doh. If you don&#39;t see that line, please search for the person by typing &quot;%John Doh%&quot; in the searching tab (You can use Fuzzy Enquiry method in ERP5 base data list page to search for any information you need). After you press the enter button&nbsp;on the keyboard, the line of John Doh&nbsp;will appear if you have created the person correctly according to the previous tutorial &quot;How to create Persons&quot;.</p>
</details>
<test>
<table class="test" style="display: none;">
	<tbody>
		<tr>
			<td>click</td>
			<td>//a[text()=&quot;ZUITE-TEST-LINK USER-001&quot;]</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/wait_for_content_loaded&quot;&gt; &lt;/tal:block&gt;</td>
		</tr>
		<tr>
			<td>click</td>
			<td>//input[@name=&quot;editable&quot;]</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/wait_for_content_loaded&quot;&gt; &lt;/tal:block&gt;</td>
		</tr>
		<tr>
			<td>waitForElementPresent</td>
			<td>//input[@name=&quot;field_my_first_name&quot;]</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>assertValue</td>
			<td>//input[@name=&quot;field_my_last_name&quot;]</td>
			<td>USER-001</td>
		</tr>
		<tr>
			<td>storeLocation</td>
			<td>person</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;span metal:use-macro=&quot;container/Zuite_viewTestMacroLibrary/macros/wait_for_activities&quot;&gt; Wait for activities &lt;/span&gt;</td>
		</tr>
	</tbody>
</table>
</test></section>

<section class="screenshot">
<h1>Click on the &quot;magnify&nbsp;glass&quot;</h1>
<img alt="Set relation: Click on the 'wheel'" src="user-Howto.Link.People.To.Existing.Organisations.Set.Relation.Click.Wheel.Svg?format=png" title="Set relation: Click on the 'wheel'" type="image/svg+xml" />
<details open="open">
<p>Now you should have landed on John Doh&#39;s View page, from which we are going to set a relation between him and his company which has been created, Z Company, as described in the introduction of this tutorial.</p>

<p>Just next to the &ldquo;organisation&rdquo; field, you can see a magnify&nbsp;glass. This is the tool in ERP5 which allows you to set relations between different items. Here you use the magnify&nbsp;glass&nbsp;to link a person to an organisation that has been previously created in ERP5. So just click on this magnify&nbsp;glass, then it will open a list of all existing organisations. In our example, we want to link John Doh to Z Company, we have opened the page of John Doh, now after we click on the magnifying glass, we can see different existing organisations (as shown in the following screenshot), and then choose Z Company that John Doh&nbsp;should be linked to.</p>
</details>
<test>
<table class="test" style="display: none;">
	<tbody>
		<tr>
			<td>open</td>
			<td>${person}</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/wait_for_app_loaded&quot;&gt; &lt;/tal:block&gt;</td>
		</tr>
		<tr>
			<td>click</td>
			<td>//div[@class=&quot;relation-input ui-input-text&quot;]/button</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/wait_for_content_loaded&quot;&gt; &lt;/tal:block&gt;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/wait_for_listbox_loaded&quot; /&gt;</td>
		</tr>
	</tbody>
</table>
</test>
</section>

<section class="screenshot">
<h1>Choose the organisation and set the relation</h1>

<p><img alt="Set relation: choose the existing organisation 1" src="user-Howto.Link.People.To.Existing.Organisations.Set.Relation.Choose.Existing.Organisation.1.Svg?format=png" title="Set relation: choose the existing organisation" type="image/svg+xml" /></p>

<p><img alt="Set relation: choose the existing organisation 2" src="user-Howto.Link.People.To.Existing.Organisations.Set.Relation.Choose.Existing.Organisation.2.Svg?format=png" title="Set relation: choose the existing organisation" type="image/svg+xml" /></p>

<details open="open">
<p>Here are some points you need to pay attention to in this step</p>

<p><strong>(1)Choose the appropriate organisation and Set relation:</strong><br />
Once the list of organisations is open, select the organisation you want to link the person with by clicking on the &quot;arrow&quot; in the last column of the organisation.</p>

<p>In our example, we want to link John Doh to Z Company, so we click the &quot;arrow&quot;&nbsp;of Z Company, as you can see on the screenshot.</p>

<p><strong>(2)Check the &quot;plane&quot; icon:</strong><br />
After you have set the relation, the &quot;magnify&nbsp;glass&quot; icon will change to a &quot;plane&quot; icon (as you can see in the following screenshot), which means that you have set a relation between two items in ERP5, and this &quot;plane&quot; icon can lead you to the related subject. In our example, once the &quot;magnify&nbsp;glass&quot; turns into the &quot;plane&quot;, John Doh is related to Z Company, and then you can check the relation by clicking on the &quot;plane&quot; to go to the page of Z Company.</p>
</details>
<test>
<table class="test" style="display: none;">
	<tbody>
		<tr>
			<td>assertElementPresent</td>
			<td>//a[text()=&quot;ZUITE-TEST-LINK-ORGANISATION-001&quot;]</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>click</td>
			<td>//a[text()=&quot;ZUITE-TEST-LINK-ORGANISATION-001&quot;]</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/wait_for_content_loaded&quot;&gt; &lt;/tal:block&gt;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/save&quot;&gt; &lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/wait_for_content_loaded&quot;&gt; &lt;/tal:block&gt; &lt;/tal:block&gt;</td>
		</tr>
	</tbody>
</table>
</test></section>

<section class="screenshot">
<h1>Check the relation (1)</h1>
<img alt="Check relation: Click on the 'plane'" src="user-Howto.Link.People.To.Existing.Organisations.Check.Relation.1.Click.Plane.Svg?format=png" title="Check relation: Click on the 'plane'" type="image/svg+xml" />
<details open="open">
<p><strong>1. Go to the organisation&#39;s page.</strong></p>

<p>Now that the relation is set, we will check that the operation worked correctly. To do this, go to the appropriate organisation&#39;s page, and make sure that the person is related to it.</p>

<p>To go to the organisation&#39;s page, you can either use one of the methods you learned in the previous tutorials (eg, browse the base data in the ERP5 home page,&nbsp; or use this new method - the &quot;plane&quot;</p>

<p>In our example, now that we have set the relation between John Doh and Z Company, in John Doh&#39;s page, we can click on the &ldquo;plane&rdquo; icon next to his organisation Z Company, which opens the View page of Z Company.</p>
</details>
<test>
<table class="test" style="display: none;">
	<tbody>
		<tr>
			<td>assertValue</td>
			<td>//input[@name=&quot;field_my_career_subordination_title&quot;]</td>
			<td>ZUITE-TEST-LINK-ORGANISATION-001</td>
		</tr>
		<tr>
			<td>click</td>
			<td>//div[@class=&quot;relation-input ui-input-text&quot;]/a</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/wait_for_content_loaded&quot;&gt; &lt;/tal:block&gt;</td>
		</tr>
		<tr>
			<td>assertValue</td>
			<td>//input[@name=&quot;field_my_title&quot;]</td>
			<td>ZUITE-TEST-LINK-ORGANISATION-001</td>
		</tr>
	</tbody>
</table>
</test></section>

<section class="screenshot">
<h1>Check the relation (2)</h1>
<img alt="Check relation: Check the person's line" src="Howto.Link.People.To.Existing.Organisations.Check.Relation.2.Check.Person.Line.Svg?format=png" title="Check relation: Check the person's line" type="image/svg+xml" />
<details open="">
<p><strong>2. Check on the linked person&#39;s information line.</strong></p>

<p>Check on the bottom of the organisation&#39;s page you have just reached and then click on the line of the appropriate person who has been linked to it. In our example, on the bottom of the page of Z Company, we can see the line &ldquo;John Doh&rdquo;with his basic information. This line confirms that John Doh has been linked to his company Z Company, as a Marketing Manager.</p>
</details>
<test>
<table class="test" style="display: none;">
	<tbody>
		<tr style="opacity: 1; z-index: 0;">
			<td>storeLocation</td>
			<td>organisation</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;span metal:use-macro=&quot;container/Zuite_viewTestMacroLibrary/macros/wait_for_activities&quot;&gt; Wait for activities &lt;/span&gt;</td>
		</tr>
		<tr>
			<td>open</td>
			<td>${organisation}</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/wait_for_app_loaded&quot;&gt; &lt;/tal:block&gt;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/wait_for_listbox_loaded&quot; /&gt;</td>
		</tr>
		<tr>
			<td>click</td>
			<td>//a[text()=&quot;ZUITE-TEST-LINK&quot;]</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td colspan="3">&lt;tal:block metal:use-macro=&quot;here/Zuite_CommonTemplateForRenderjsUi/macros/wait_for_content_loaded&quot;&gt; &lt;/tal:block&gt;</td>
		</tr>
		<tr style="opacity: 1; z-index: 0;">
			<td>assertValue</td>
			<td>//input[@name=&quot;field_my_first_name&quot;]</td>
			<td>ZUITE-TEST-LINK</td>
		</tr>
	</tbody>
</table>
</test></section>

<section class="screenshot">
<h1>Linking to a new organisation</h1>
<img alt="Link people to new organization Y Company" src="user-Howto.Link.People.To.New.Organisation?format=png" title="Link people to new organization Y Company" type="image/svg+xml" />
<p>Already created in ERP5: <span style="color: red;">No</span></p>

<details open="open">
<p>ERP5 allows you to create a new organisation directly from a person&#39;s View page, in this way you can link a person to the organisation directly.</p>

<p>Now let&#39;s see a new example: Lei XU is working for the Y Company. First, create the person, just like you learned to create a new person in the tutorial &quot;How to create Persons&quot;. Now let&#39;s see how can we link him directly to the new company.</p>
</details>
<test>
<table class="test" style="display: none;">
	<tbody>
	</tbody>
</table>
</test></section>

<section class="screenshot">
<h1>Go to the person&#39;s page</h1>
<img alt="Set relation: go to person's page" src="user-Howto.Link.People.To.New.Organisations.Go.To.Persons.Page.Svg?format=png" title="Set relation: go to person's page" type="image/svg+xml" />
<details open="open">
<p>First you need to go the View page of the person you want to link to the organisation.</p>
</details>
<test>
<table class="test" style="display: none;">
	<tbody>
		<tr style="opacity: 1; z-index: 0;">
			<td>openAndWait</td>
			<td>${person}</td>
			<td>&nbsp;</td>
		</tr>
	</tbody>
</table>
</test></section>

<section class="screenshot">
<h1>Type the organisation&#39;s name</h1>
<img alt="Set relation: type new organisation's name and save" src="user-Howto.Link.People.To.New.Organisations.Type.Organisations.Name.And.Save.Svg?format=png" title="Set relation: type new organisation's name and save" type="image/svg+xml" />
<details open="open">
<p>Once have created the person Lei XU, just type the name of his/her organisation in the &ldquo;organisation&rdquo; field. When you are ready, click the save button.</p>
</details>
</section>

<section class="screenshot">
<h1>Add organisation</h1>
<img alt="Set relation: add new organisation" src="user-Howto.Link.People.To.New.Organisations.Add.Organisations.Svg?format=png" title="Set relation: add new organisation" type="image/svg+xml" />
<details open="open">
<p>ERP5 will alert you that the organisation that you try to link your person to does not exist, but offers you to create it. If you accept, the related organisation will be created, and the person will be directly linked to it.<br />
To do this, first browse the item menu circled in red, then click on &ldquo;Create New Organisation: Y Company&rdquo;. This will create the organisation and save the operation automatically.</p>

<p>You can now check that everything worked fine by going to the related organisation&#39;s page. To do this, you can use one of the methods you learned in the first tutorials, or simply click on the &quot;plane&quot; icon next to the &quot;organisation&rdquo; field. This will lead you to the related organisation&#39;s page (as described in the first part of this tutorial).</p>
</details>
<test>
<table class="test" style="display: none;">
	<tbody>
		<tr style="opacity: 1;">
			<td colspan="3">&lt;span metal:use-macro=&quot;container/Zuite_viewTestMacroLibrary/macros/login_as_manager&quot;&gt;Login As Manager&lt;/span&gt;</td>
		</tr>
		<tr>
			<td>openAndWait</td>
			<td>${base_url}/Zuite_tearDownPersonAndOrganisationLinkingTest</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>verifyTextPresent</td>
			<td>Clean Ok</td>
			<td>&nbsp;</td>
		</tr>
		<tr style="opacity: 1;">
			<td colspan="3">&lt;span metal:use-macro=&quot;container/Zuite_viewTestMacroLibrary/macros/wait_for_activities&quot;&gt; Wait for activities &lt;/span&gt;</td>
		</tr>
	</tbody>
</table>
</test></section>