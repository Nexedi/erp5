<section>
<test>
  <table style="display: none;" class="test">
    <tbody>
      <tr>
        <td>store</td>
        <td tal:content="python:here.getPortalObject().absolute_url()">http://example.com/erp5</td>
        <td>base_url_x</td>
      </tr>
      <tr>
        <td>openAndWait</td>
        <td>${base_url}/Zuite_setUpPersonTest</td>
        <td></td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td></td>
      </tr>
      <tr class="" style="opacity: 1;">
        <td colspan="3">&lt;span metal:use-macro="container/Zuite_viewTestMacroLibrary/macros/wait_for_activities"&gt; Wait for activities &lt;/span&gt;</td>
      </tr>
      <tr class="" style="opacity: 1;">
        <td colspan="3">&lt;span metal:use-macro="container/Zuite_viewTestMacroLibrary/macros/login_as_functional_test_user"&gt;Login As Functional Test User&lt;/span&gt;</td>
      </tr>
    </tbody>
  </table>
</test>
<h1>Agenda</h1>

<ul>
	<li>Create Data Supply</li>
	<li>Create Data Supply Lines</li>
</ul>

<details open="">
<p>&nbsp;</p>

<p>This tutorial teaches how to create&nbsp; Data Supply to prepare Wendelin to receive&nbsp;data sent by fluentd from IoT Gateway.</p>

<p>&nbsp;</p>
</details>
</section>

<section>
<h1>Data Supplies</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.1.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>On the modules page click on Data Supplies.</p>

<p>&nbsp;</p>
</details>
</section>

<section>
<h1>Add</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.2.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>Click on Add button to add new Data Supply.</p>

<p>&nbsp;</p>
</details>
</section>

<section>
<h1>Create Document</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.3.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>Continue with clicking on Create Document.</p>

<p>&nbsp;</p>
</details>

<test>
  <table style="display: none;" class="test">
    <tbody>
      <tr>
        <td>openAndWait</td>
        <td>${base_url_x}/web_site_module/default_wendelin_front/</td>
        <td></td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//a[contains(@href,'page=front')]</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//a[contains(@href,'page=front')]</td>
        <td></td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//a[contains(@href,'data_supply_module')]</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//a[contains(@href,'data_supply_module')]</td>
        <td></td>
      </tr>

      <!--<tr>
        <td>waitForElementPresent</td>
        <td>//tbody//tr[3]//td[1]//a</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//tbody//tr[3]//td[1]//a</td>
        <td></td>
      </tr>
      <tr>
        <td>pause</td>
        <td>3000</td>
        <td></td>
      </tr>-->

      <tr>
        <td>waitForElementPresent</td>
        <td>//a[@data-i18n="Add"]</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//a[@data-i18n="Add"]</td>
        <td></td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//input[@type="submit" and @value="Create Document"]</td>
        <td></td>
      </tr>
      <tr>
        <td>pause</td>
        <td>3000</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//input[@type="submit" and @value="Create Document"]</td>
        <td></td>
      </tr>
    </tbody>
  </table>
</test>
</section>

<section>
<h1>Fill the Form</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.4.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>First fill in&nbsp;the <strong>Title </strong>and<strong>&nbsp; Reference&nbsp;</strong>for the Data Supply.&nbsp;</p>

<p>Pay attention on the <b>reference</b>, we name it simply&nbsp;<strong>sensor_1 </strong>as we have only 1 sensor that will be sending data to wendelin.&nbsp;</p>

<p>This reference will be used in later tutorials when we will configure fluentd.&nbsp;</p>
</details>
</section>

<section>
<h1>Fill the Form Cont.</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.5.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>Imagine an example of&nbsp;a Sample Company that owns a Sample Factory where is a sensor that sends data to wendelin.&nbsp;</p>

<p>Then the source of the data is Sample Factory.&nbsp;</p>

<p><strong>Source -&nbsp;</strong>where data comes from.&nbsp;</p>
</details>
</section>

<section>
<h1>Fill the Form Cont.</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.6.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>Continuing the example, the <strong>Source Section</strong> is Sample Company.</p>

<p><strong>Source Section - </strong>owner of data before the ingestion.</p>
</details>
</section>

<section>
<h1>Fill the Form Cont.</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.7.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p><strong>Destination - </strong>physical place where data is stored.</p>

<p><strong>Destination Section -&nbsp;</strong>owner of data after ingestion. Can be the same as the source.</p>

<p>&nbsp;</p>
</details>

<test>
  <table style="display: none;" class="test">
    <tbody>
      <tr>
        <td>waitForElementPresent</td>
        <td>//input[@id="field_my_title"]</td>
        <td></td>
      </tr>
      <tr>
        <td>type</td>
        <td>//input[@id="field_my_title"]</td>
        <td>Environment Sensor</td>
      </tr>
      <tr>
        <td>type</td>
        <td>//input[@id="field_my_reference"]</td>
        <td>sensor_1</td>
      </tr>
      <tr>
        <td>type</td>
        <td>//input[@id="field_my_version"]</td>
        <td>001</td>
      </tr>
      <tr>
        <td>type</td>
        <td>//input[@id="field_my_source_title"]</td>
        <td>Sample Factory</td>
      </tr>
      <tr>
        <td>fireEvent</td>
        <td>//input[@name='field_my_source_title']</td>
        <td>input</td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//li[@name='Organisation']</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//li[@name='Organisation']</td>
        <td></td>
      </tr>
      
      
      <tr>
        <td>type</td>
        <td>//input[@id="field_my_source_section_title"]</td>
        <td>Sample Company</td>
      </tr>
      <tr>
        <td>fireEvent</td>
        <td>//input[@name='field_my_source_section_title']</td>
        <td>input</td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//li[@name='Organisation']</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//li[@name='Organisation']</td>
        <td></td>
      </tr>
      
      <tr>
        <td>type</td>
        <td>//input[@id="field_my_destination_title"]</td>
        <td>Nexedi Data Center</td>
      </tr>
      <tr>
        <td>fireEvent</td>
        <td>//input[@name='field_my_destination_title']</td>
        <td>input</td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//li[@name='Organisation']</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//li[@name='Organisation']</td>
        <td></td>
      </tr>
      <!--<tr>
        <td>type</td>
        <td>//input[@id="field_my_effective_date"]</td>
        <td>01/01/2020</td>
      </tr>
      <tr>
        <td>type</td>
        <td>//input[@id="field_my_expiration_date"]</td>
        <td>01/01/2099</td>
      </tr>-->
      <tr>
        <td>click</td>
        <td>//button[@name="submit" and @data-i18n="Save"]</td>
        <td></td>
      </tr>
      <tr>
        <td>pause</td>
        <td>5000</td>
        <td></td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//button[@type="submit" and @class="success"]</td>
        <td></td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//a[contains(@href,'Dvalidate_action')]</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//a[contains(@href,'Dvalidate_action')]</td>
        <td></td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//input[@type="submit" and @value="Validate"]</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//input[@type="submit" and @value="Validate"]</td>
        <td></td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//button[@type="submit" and @class="success"]</td>
        <td></td>
      </tr>
      
      <tr>
        <td>waitForElementPresent</td>
        <td>//label[@for="field_my_translated_validation_state_title"]</td>
        <td></td>
      </tr>
      
      <tr>
        <td>assertTextPresent</td>
        <td>Validated</td>
        <td></td>
      </tr>
      
      <tr>
        <td>waitForElementPresent</td>
        <td>//input[@id="field_my_destination_section_title"]</td>
        <td></td>
      </tr>
      <tr>
        <td>type</td>
        <td>//input[@id="field_my_destination_section_title"]</td>
        <td>Sample Company</td>
      </tr>
      <tr>
        <td>fireEvent</td>
        <td>//input[@name='field_my_destination_section_title']</td>
        <td>input</td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//li[@name='Organisation']</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//li[@name='Organisation']</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//button[@name="submit" and @data-i18n="Save"]</td>
        <td></td>
      </tr>
      <tr>
        <td>pause</td>
        <td>5000</td>
        <td></td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//button[@type="submit" and @class="success"]</td>
        <td></td>
      </tr>
    </tbody>
  </table>
</test>
</section>

<section>
<h1>Save</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.8.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>After click on Save button to save the changes.&nbsp;&nbsp;</p>
</details>
</section>

<section>
<h1>Validate</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.9.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>After it is saved, click on Validate on left side panel to validate the Data Supply.</p>
</details>

<p>&nbsp;</p>
</section>

<section>
<h1>Confirm Valdation</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.11.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>Click on Validate to confirm validation.</p>
</details>

<p>&nbsp;</p>
</section>

<section>
<h1>Add Data Supply Line</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.Line.1.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>Click on Add button to add Data Supply Line.</p>
</details>

<p>&nbsp;</p>
</section>

<section>
<h1>Create Document</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.Line.2.screenshot?format=" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>Continue with clicking on Create Document.</p>
</details>

<p>&nbsp;</p>
</section>

<section>
<h1>Fill the Form</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.Line.3.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>Title:&nbsp;<strong>Ingest Bucket Data</strong></p>

<p>Reference:&nbsp;<strong>ingestion_operation</strong></p>

<p>For&nbsp;Product or Service - data operation by default exists in wendelin. when you type in the field&nbsp;<strong>Ingest Data&nbsp;</strong>from drop down list choose the existing one.&nbsp;</p>
</details>
</section>

<section>
<h1>Fill the Form Cont.</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.Line.4.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>For Item we choose Data Acquisition Unit that we created in the previous tutorial.&nbsp;</p>
</details>
</section>

<section>
<h1>Save</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.Line.5.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>After click on Save button to save the changes.&nbsp;&nbsp;</p>
</details>
</section>

<section>
<h1>Back to Data Supply</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.Line.6.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>
<p>Click on Data Supply Line: Ingest Bucket Data to go back and create another Data Supply line</p>
</details>

<test>
  <table style="display: none;" class="test">
    <tbody>
      <tr>
        <td>waitForElementPresent</td>
        <td>//a[@data-i18n="Add"]</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//a[@data-i18n="Add"]</td>
        <td></td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//input[@type="submit" and @value="Create Document"]</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//input[@type="submit" and @value="Create Document"]</td>
        <td></td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//input[@id="field_my_title"]</td>
        <td></td>
      </tr>
      <tr>
        <td>type</td>
        <td>//input[@id="field_my_title"]</td>
        <td>Ingest Bucket Data</td>
      </tr>
      <tr>
        <td>type</td>
        <td>//input[@id="field_my_reference"]</td>
        <td>ingestion_operation</td>
      </tr>
      <tr>
        <td>type</td>
        <td>//input[@id="field_my_resource_title"]</td>
        <td>Ingest Data</td>
      </tr>
      <tr>
        <td>fireEvent</td>
        <td>//input[@name='field_my_resource_title']</td>
        <td>input</td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//li[contains(@data-relative-url,'data_operation_module/')]</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//li[contains(@data-relative-url,'data_operation_module/')]</td>
        <td></td>
      </tr>
      <tr>
        <td>type</td>
        <td>//input[@id="field_my_aggregate_title_list"]</td>
        <td>Olimex Environment Sensor</td>
      </tr>
      <tr>
        <td>fireEvent</td>
        <td>//input[@name='field_my_aggregate_title_list']</td>
        <td>input</td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//li[contains(@data-relative-url,'data_acquisition_unit_module/')]</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//li[contains(@data-relative-url,'data_acquisition_unit_module/')]</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//button[@name="submit" and @data-i18n="Save"]</td>
        <td></td>
      </tr>
      <tr>
        <td>pause</td>
        <td>5000</td>
        <td></td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//button[@type="submit" and @class="success"]</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//a[contains(@data-i18n, 'Data Supply Line')]</td>
        <td></td>
      </tr>
      <tr>
       <td>pause</td>
       <td>5000</td>
       <td></td>
      </tr>
    </tbody>
  </table>
</test>
</section>

<section>
<h1>Add Data Supply Line</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.Line.1.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>Click on Add button to add Data Supply Line.</p>
</details>

<p>&nbsp;</p>
</section>

<section>
<h1>Create Document</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.Line.2.screenshot?format=" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>Continue with clicking on Create Document.</p>
</details>

<p>&nbsp;</p>
</section>

<section>
<h1>Fill the Form</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.Line.7.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>Title:&nbsp;<strong>Sample Environment Data</strong></p>

<p>Reference:&nbsp;<strong>out_stream</strong></p>

<p>For&nbsp;Product or Service we choose Data Product that we created in the previous tutorial.</p>
</details>
</section>

<section>
<h1>Fill the Form Cont.</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.Line.8.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>For <strong>Use</strong> from drop down list choose <strong>Big Data/Ingestion/Stream Ingestion</strong>.</p>
</details>
</section>

<section>
<h1>Save</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.Line.9.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>After click on Save button to save the changes.&nbsp;&nbsp;</p>
</details>
</section>

<section>
<h1>Data Supply</h1>
<img alt="" src="wendelin-new.Interface.add.Data.Supply.Line.10.screenshot?format=" style="font-size: 13px;" title="" type="image/svg+xml" />
<details open="">
<p>&nbsp;</p>

<p>Data Supply with Data Supply Lines is ready.</p>
</details>

<test>
  <table style="display: none;" class="test">
    <tbody>
      <tr>
        <td>waitForElementPresent</td>
        <td>//a[@data-i18n="Add"]</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//a[@data-i18n="Add"]</td>
        <td></td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//input[@type="submit" and @value="Create Document"]</td>
        <td></td>
      </tr>
       <tr>
         <td>pause</td>
         <td>5000</td>
         <td></td>
       </tr>
      <tr>
        <td>click</td>
        <td>//input[@type="submit" and @value="Create Document"]</td>
        <td></td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//input[@id="field_my_title"]</td>
        <td></td>
      </tr>
      <tr>
        <td>type</td>
        <td>//input[@id="field_my_title"]</td>
        <td>Sample Environment Data</td>
      </tr>
      <tr>
        <td>type</td>
        <td>//input[@id="field_my_reference"]</td>
        <td>out_stream</td>
      </tr>
      <tr>
        <td>type</td>
        <td>//input[@id="field_my_resource_title"]</td>
        <td>Sample Environment Raw Data</td>
      </tr>
      <tr>
        <td>fireEvent</td>
        <td>//input[@name='field_my_resource_title']</td>
        <td>input</td>
      </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//li[contains(@data-relative-url,'data_product_module/')]</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//li[contains(@data-relative-url,'data_product_module/')]</td>
        <td></td>
      </tr>
      <tr>
        <td>select</td>
        <td>//select[@id="field_my_use"]</td>
        <td>Big Data/Ingestion/Stream Ingestion</td>
      </tr>
      <tr>
        <td>click</td>
        <td>//button[@name="submit" and @data-i18n="Save"]</td>
        <td></td>
      </tr>
      <tr>
         <td>pause</td>
         <td>5000</td>
         <td></td>
       </tr>
      <tr>
        <td>waitForElementPresent</td>
        <td>//button[@type="submit" and @class="success"]</td>
        <td></td>
      </tr>
      <tr>
        <td>click</td>
        <td>//a[contains(@data-i18n, 'Data Supply Line')]</td>
        <td></td>
      </tr>
      <tr>
        <td>pause</td>
        <td>5000</td>
        <td></td>
      </tr>
      <tr>
        <td>verifyElementPresent</td>
        <td>//input[@value="ingestion_operation"]</td>
        <td></td>
      </tr>
      <tr>
        <td>verifyElementPresent</td>
        <td>//input[@value="out_stream"]</td>
        <td></td>
      </tr>
      <tr>
        <td>openAndWait</td>
        <td>${base_url}/Zuite_waitForActivities</td>
        <td></td>
      </tr>
      <tr>
        <td>assertTextPresent</td>
        <td>Done.</td>
        <td></td>
      </tr>
      <tr>
        <td>open</td>
        <td>${base_url_x}/portal_skins/erp5_wendelin_data_lake/Ingestion_ingestDataStream?reference=sensor_1-sample-environment-raw-data</td>
        <td></td>
      </tr>
      <tr>
        <td>assertTextPresent</td>
        <td>Data ingested</td>
        <td></td>
      </tr>
      <tr>
        <td>pause</td>
        <td>60000</td>
        <td></td>
      </tr>
      <tr>
        <td>openAndWait</td>
        <td>${base_url_x}/web_site_module/default_wendelin_front/</td>
        <td></td>
      </tr>
    </tbody>
  </table>
</test>
</section>