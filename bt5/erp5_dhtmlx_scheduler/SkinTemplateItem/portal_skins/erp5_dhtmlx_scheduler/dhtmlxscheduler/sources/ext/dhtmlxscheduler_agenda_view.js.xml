<?xml version="1.0"?>
<ZopeData>
  <record id="1" aka="AAAAAAAAAAE=">
    <pickle>
      <global name="File" module="OFS.Image"/>
    </pickle>
    <pickle>
      <dictionary>
        <item>
            <key> <string>_EtagSupport__etag</string> </key>
            <value> <string>ts65189552.78</string> </value>
        </item>
        <item>
            <key> <string>__name__</string> </key>
            <value> <string>dhtmlxscheduler_agenda_view.js</string> </value>
        </item>
        <item>
            <key> <string>content_type</string> </key>
            <value> <string>application/javascript</string> </value>
        </item>
        <item>
            <key> <string>data</string> </key>
            <value> <string encoding="cdata"><![CDATA[

/*\r\n
@license\r\n
dhtmlxScheduler v.4.3.1 \r\n
\r\n
This software is covered by GPL license. You also can obtain Commercial or Enterprise license to use it in non-GPL project - please contact sales@dhtmlx.com. Usage without proper license is prohibited.\r\n
\r\n
(c) Dinamenta, UAB.\r\n
*/\r\n
scheduler.date.add_agenda = function(date){\r\n
\treturn scheduler.date.add(date, 1, "year");\r\n
};\r\n
\r\n
scheduler.templates.agenda_time = function(start,end,ev){\r\n
\tif (ev._timed) \r\n
\t\treturn this.day_date(ev.start_date, ev.end_date, ev)+" "+this.event_date(start);\r\n
\telse\r\n
\t\treturn scheduler.templates.day_date(start)+" &ndash; "+scheduler.templates.day_date(end);\r\n
};\r\n
scheduler.templates.agenda_text = function(start,end,event){\r\n
\treturn event.text;\r\n
};\r\n
scheduler.templates.agenda_date = function(){ return ""; };\r\n
\r\n
scheduler.date.agenda_start=function(){ return scheduler.date.date_part(scheduler._currentDate()); };\r\n
\r\n
scheduler.attachEvent("onTemplatesReady",function() {\r\n
\tvar old_dblclick_dhx_cal_data = scheduler.dblclick_dhx_cal_data;\r\n
\tscheduler.dblclick_dhx_cal_data = function() {\r\n
\t\tif (this._mode == "agenda") {\r\n
\t\t\tif (!this.config.readonly && this.config.dblclick_create)\r\n
\t\t\t\tthis.addEventNow();\r\n
\t\t} else {\r\n
\t\t\tif (old_dblclick_dhx_cal_data)\r\n
\t\t\t\treturn old_dblclick_dhx_cal_data.apply(this, arguments);\r\n
\t\t}\r\n
\t};\r\n
\tscheduler.attachEvent("onSchedulerResize",function(){\r\n
\tif (this._mode == "agenda"){\r\n
\t\tthis.agenda_view(true);\r\n
\t\treturn false;\r\n
\t}\r\n
\t\treturn true;\r\n
\t});\r\n
\t\r\n
\t\r\n
\tvar old = scheduler.render_data;\r\n
\tscheduler.render_data=function(evs){\r\n
\t\tif (this._mode == "agenda")\r\n
\t\t\tfill_agenda_tab();\r\n
\t\telse\r\n
\t\t\treturn old.apply(this,arguments);\r\n
\t};\r\n
\t\r\n
\tvar old_render_view_data = scheduler.render_view_data;\r\n
\tscheduler.render_view_data = function(){\r\n
\t\tif(this._mode == "agenda") {\r\n
\t\t\tscheduler._agendaScrollTop = scheduler._els["dhx_cal_data"][0].childNodes[0].scrollTop;\r\n
\t\t\tscheduler._els["dhx_cal_data"][0].childNodes[0].scrollTop = 0;\r\n
\t\t}\r\n
\t\treturn old_render_view_data.apply(this,arguments);\r\n
\t};\r\n
\r\n
\r\n
\tfunction set_full_view(mode){\r\n
\t\tif (mode){\r\n
\t\t\tvar l = scheduler.locale.labels;\r\n
\t\t\tscheduler._els["dhx_cal_header"][0].innerHTML="<div class=\'dhx_agenda_line\'><div>"+l.date+"</div><span style=\'padding-left:25px\'>"+l.description+"</span></div>";\r\n
\t\t\tscheduler._table_view=true;\r\n
\t\t\tscheduler.set_sizes();\r\n
\t\t}\r\n
\t}\r\n
\r\n
\tfunction fill_agenda_tab(){\r\n
\t\t//get current date\r\n
\t\tvar date = scheduler._date;\r\n
\t\t//select events for which data need to be printed\r\n
\t\t\r\n
\t\tvar events = scheduler.get_visible_events();\r\n
\t\tevents.sort(function(a,b){ return a.start_date>b.start_date?1:-1;});\r\n
\t\t\r\n
\t\t//generate html for the view\r\n
\t\tvar html="<div class=\'dhx_agenda_area\'>";\r\n
\t\tfor (var i=0; i<events.length; i++){\r\n
\t\t\tvar ev = events[i];\r\n
\t\t\tvar bg_color = (ev.color?("background:"+ev.color+";"):"");\r\n
\t\t\tvar color = (ev.textColor?("color:"+ev.textColor+";"):"");\r\n
\t\t\tvar ev_class = scheduler.templates.event_class(ev.start_date, ev.end_date, ev);\r\n
\t\t\thtml+="<div class=\'dhx_agenda_line"+(ev_class?\' \'+ev_class:\'\')+"\' event_id=\'"+ev.id+"\' style=\'"+color+""+bg_color+""+(ev._text_style||"")+"\'><div class=\'dhx_agenda_event_time\'>"+scheduler.templates.agenda_time(ev.start_date, ev.end_date,ev)+"</div>";\r\n
\t\t\thtml+="<div class=\'dhx_event_icon icon_details\'>&nbsp</div>";\r\n
\t\t\thtml+="<span>"+scheduler.templates.agenda_text(ev.start_date, ev.end_date, ev)+"</span></div>";\r\n
\t\t}\r\n
\t\thtml+="<div class=\'dhx_v_border\'></div></div>";\r\n
\t\t\t\r\n
\t\t//render html\r\n
\t\tscheduler._els["dhx_cal_data"][0].innerHTML = html;\r\n
\t\tscheduler._els["dhx_cal_data"][0].childNodes[0].scrollTop = scheduler._agendaScrollTop||0;\r\n
\r\n
\t\t// setting up dhx_v_border size\r\n
\t\tvar agenda_area = scheduler._els["dhx_cal_data"][0].childNodes[0];\r\n
\t\tvar v_border = agenda_area.childNodes[agenda_area.childNodes.length-1];\r\n
\t\tv_border.style.height = (agenda_area.offsetHeight < scheduler._els["dhx_cal_data"][0].offsetHeight) ? "100%" : (agenda_area.offsetHeight+"px");\r\n
\t\t\r\n
\t\tvar t=scheduler._els["dhx_cal_data"][0].firstChild.childNodes;\r\n
\t\tscheduler._els["dhx_cal_date"][0].innerHTML=scheduler.templates.agenda_date(scheduler._min_date, scheduler._max_date, scheduler._mode);\r\n
\t\t\r\n
\t\tscheduler._rendered=[];\r\n
\t\tfor (var i=0; i < t.length-1; i++)\r\n
\t\t\tscheduler._rendered[i]=t[i];\r\n
\t\t\r\n
\t}\r\n
\r\n
\tscheduler.agenda_view=function(mode){\r\n
\t\tscheduler._min_date = scheduler.config.agenda_start||scheduler.date.agenda_start(scheduler._date);\r\n
\t\tscheduler._max_date = scheduler.config.agenda_end||scheduler.date.add_agenda(scheduler._min_date, 1);\r\n
\t\tscheduler._table_view = true;\r\n
\t\tset_full_view(mode);\r\n
\t\tif (mode){\r\n
\t\t\t//agenda tab activated\r\n
\t\t\tfill_agenda_tab();\r\n
\t\t} else {\r\n
\t\t\t//agenda tab de-activated\r\n
\t\t}\r\n
\t};\r\n
});\r\n


]]></string> </value>
        </item>
        <item>
            <key> <string>precondition</string> </key>
            <value> <string></string> </value>
        </item>
        <item>
            <key> <string>size</string> </key>
            <value> <int>4660</int> </value>
        </item>
        <item>
            <key> <string>title</string> </key>
            <value> <string></string> </value>
        </item>
      </dictionary>
    </pickle>
  </record>
</ZopeData>
